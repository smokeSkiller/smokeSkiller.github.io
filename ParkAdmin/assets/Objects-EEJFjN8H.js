import{B as oe,_ as le}from"./BottomNotify-BTbGL-ds.js";import{_ as F,a as ne,b as ae,P as ie,d as re,f as de,e as E}from"./vue-3-slider-component-DVLLiOr3.js";import{T as me}from"./CustomOpenIndicator-BQQZUi6w.js";import{_ as ue,C as fe}from"./summary-icon-q8Svinap.js";import{B as S}from"./BaseButton-BUPZcaam.js";import{_ as pe}from"./close-icon-DcnZ6QH4.js";import{_ as be,D as ce,a as Ce}from"./useObjectsEditor-1kBT4oY3.js";import{g as w,o as b,s as ve,w as i,a as o,b as l,t as N,d as u,_ as I,e as ge,c as j,j as ke,F as V,A as ye,u as e}from"./index-BWF_qH93.js";import{u as Se,O as $e}from"./useObjects-nteVrfx-.js";import{_ as Ee}from"./plus-icon-lxHPDhbU.js";import{T as Re}from"./TableModal-p6TpcjEn.js";import{_ as R}from"./FormSelectField-BrAB1vmC.js";import{o as y,c as C}from"./modal-DRTCzFhK.js";import"./FormField-5cKzPise.js";import"./SecondaryTable-DySUWM44.js";import"./FilterSortSearch-CQoBWqkz.js";import"./FilterSortDate-CPNclfv2.js";const je={__name:"ObjectsToolbar",props:{hasSelection:Boolean,selectedCount:Number,statusOptions:Array},emits:["deselect-all","delete-selected","open-mass-editor","change-status","calculate-summary"],setup(r,{emit:c}){const d=c;return(f,s)=>(b(),w(ie,null,ve({right:i(()=>[l(S,{class:"small-btn",onClick:s[5]||(s[5]=m=>d("open-settings"))},{default:i(()=>[...s[11]||(s[11]=[o("img",{src:ne},null,-1)])]),_:1}),l(S,{class:"small-btn"},{default:i(()=>[...s[12]||(s[12]=[o("img",{src:ae},null,-1)])]),_:1})]),_:2},[r.hasSelection?{name:"left",fn:i(()=>[o("div",{class:"selected-count controller-item",onClick:s[0]||(s[0]=m=>d("deselect-all"))},[o("span",null,"Выбрано: "+N(r.selectedCount),1),l(S,{class:"btn-filled"},{default:i(()=>[...s[6]||(s[6]=[o("img",{src:pe},null,-1)])]),_:1})]),o("div",{class:"delete-row controller-item",onClick:s[1]||(s[1]=m=>d("delete-selected"))},[...s[7]||(s[7]=[o("img",{src:F},null,-1),u(" Удалить ",-1)])]),o("div",{class:"edit controller-item",onClick:s[2]||(s[2]=m=>d("open-mass-editor"))},[...s[8]||(s[8]=[o("img",{src:be},null,-1),u(" Редактировать ",-1)])]),l(ce,{class:"change-status controller-item","dropdown-list":r.statusOptions,onChange:s[3]||(s[3]=m=>d("change-status",m))},{default:i(()=>[...s[9]||(s[9]=[o("img",{src:Ce},null,-1),u(" Изменить статус ",-1)])]),_:1},8,["dropdown-list"]),o("div",{class:"summary controller-item",onClick:s[4]||(s[4]=m=>d("calculate-summary"))},[...s[10]||(s[10]=[o("img",{src:ue},null,-1),u(" Сумма ",-1)])])]),key:"0"}:void 0]),1024))}},we={action:"#"},Te=["onClick"],xe=Object.assign({inheritAttrs:!1},{__name:"ObjectsMassEditor",props:{tabs:Array,customClass:String,headerTitle:String,massEditorFields:Array,massEditorParams:Array},emits:["close-click","save-click","add-mass-editor-fields-row","remove-mass-editor-field"],setup(r,{expose:c,emit:d}){const f=d,s=ge(null);return c({open:()=>s.value.open(),close:()=>s.value.close()}),(m,a)=>(b(),w(Re,{tabs:r.tabs,"custom-class":r.customClass,"header-title":r.headerTitle,onSaveClick:a[1]||(a[1]=p=>f("save-click")),onCloseClick:a[2]||(a[2]=p=>f("close-click")),ref_key:"massEditorRef",ref:s},{edit:i(()=>[o("form",we,[a[5]||(a[5]=o("h3",null,"Редактирование выбранных объектов",-1)),a[6]||(a[6]=o("div",{class:"d-flex"},[o("span",{class:"fields-label"},"Параметр"),o("span",{class:"fields-label"},"До изменения"),o("span",{class:"fields-label"},"После изменения")],-1)),(b(!0),j(V,null,ke(r.massEditorFields,(p,v)=>(b(),j("div",{class:"fields-row",key:v},[l(R,{options:r.massEditorParams,width:160},null,8,["options"]),l(R,{options:r.massEditorParams,width:160},null,8,["options"]),l(R,{options:r.massEditorParams,width:160},null,8,["options"]),o("button",{type:"button",class:"delete-row",onClick:$=>f("remove-mass-editor-field",v)},[...a[3]||(a[3]=[o("img",{src:F},null,-1)])],8,Te)]))),128)),o("button",{type:"button",class:"add-fields-btn",onClick:a[0]||(a[0]=p=>f("add-mass-editor-fields-row"))},[...a[4]||(a[4]=[o("img",{src:Ee},null,-1),u(" Добавить изменения ",-1)])])])]),_:1},8,["tabs","custom-class","header-title"]))}}),Oe=I(xe,[["__scopeId","data-v-22cc201e"]]),Pe={class:"page"},Me={class:"page-content"},Ae={class:"popup-title"},Be={__name:"Objects",setup(r){const{objectsStore:c,mainTableRef:d,tableHeader:f,tableContent:s,tableSettingsHeader:m,hasSelection:a,selectedCount:p,selectedRowsName:v,deleteSelectedPopupRef:$,deleteSinglePopupRef:g,savePopupRef:T,saveNotifyRef:H,tableSettingsRef:x,statusOptionsList:L,showCalculatedSummary:O,summaryItems:U,massEditorRef:P,massEditorTabs:q,massEditorParams:z,massEditorFields:M,objectEditorRef:k,objectEditorTabs:G,objectEditorFields:J,objectEditorTableColumns:K,objectEditorTableContent:Q,objectHasEdited:A,onSelectionChanged:W,deselectAll:B,openDeletePopup:X,deleteSelected:Y,saveConfirmClick:D,cancelSaveClick:Z,openMassEditor:_,addModalTableRow:h,addMassEditorFieldsRow:ee,changeTableSettings:te,calculateSummaryItems:se}=Se();return(De,t)=>(b(),j(V,null,[o("main",Pe,[l(me,null,{default:i(()=>[l(S,{class:"btn-filled"},{default:i(()=>[...t[15]||(t[15]=[u("Объекты",-1)])]),_:1})]),_:1}),o("div",Me,[l(je,{"has-selection":e(a),"selected-count":e(p),"status-options":e(L),onDeselectAll:e(B),onDeleteSelected:e(X),onOpenMassEditor:e(_),onChangeStatus:t[0]||(t[0]=n=>console.log("Status:",n)),onCalculateSummary:e(se),onOpenSettings:t[1]||(t[1]=n=>e(y)(e(x)))},null,8,["has-selection","selected-count","status-options","onDeselectAll","onDeleteSelected","onOpenMassEditor","onCalculateSummary"]),e(O)?(b(),w(fe,{key:0,"selected-text":`${e(p)} объектов`,"title-text":"Данные по выбранным объектам:",items:e(U),onReset:t[2]||(t[2]=n=>(O.value=!1,e(B)()))},null,8,["selected-text","items"])):ye("",!0),l(re,{style:{"margin-top":"20px"},data:e(s),columns:e(f),onRowDblclick:t[3]||(t[3]=n=>e(y)(e(k))),onSelectionChanged:e(W),ref_key:"mainTableRef",ref:d},null,8,["data","columns","onSelectionChanged"])])]),l($e,{"header-title":"Парковочный объект: “ТЦ Ромашка”",tabs:e(G),"inner-width":870,"close-on-overlay-click":!1,"disabled-save-btn":!e(A),"object-has-edited":e(A),"object-editor-fields":e(J),"object-editor-table-columns":e(K),"object-editor-table-content":e(Q),onOverlayClick:t[4]||(t[4]=n=>e(y)(e(T))),onSaveClick:e(D),onCloseClick:t[5]||(t[5]=n=>e(C)(e(k))),onAddModalTableRow:t[6]||(t[6]=n=>e(h)(e(k).contactsTable)),onOpenDeletePopup:t[7]||(t[7]=n=>e(y)(e(g))),ref_key:"objectEditorRef",ref:k},null,8,["tabs","disabled-save-btn","object-has-edited","object-editor-fields","object-editor-table-columns","object-editor-table-content","onSaveClick"]),l(Oe,{tabs:e(q),"custom-class":"mass-editor-modal","header-title":"Выбрано: 3","mass-editor-fields":e(M),"mass-editor-params":e(z),onSaveClick:t[8]||(t[8]=n=>console.log("Changes saved!")),onCloseClick:t[9]||(t[9]=n=>e(C)(e(P))),onAddMassEditorFieldsRow:e(ee),onRemoveMassEditorField:t[10]||(t[10]=n=>e(M).splice(n,1)),ref_key:"massEditorRef",ref:P},null,8,["tabs","mass-editor-fields","mass-editor-params","onAddMassEditorFieldsRow"]),l(de,{"table-columns":e(m),onChange:t[11]||(t[11]=n=>e(te)(n,e(c),e(d))),ref_key:"tableSettingsRef",ref:x},null,8,["table-columns"]),l(E,{ref_key:"savePopupRef",ref:T,"confirm-text":"Сохранить","cancel-text":"Не сохранять",onCancel:e(Z),onConfirm:e(D)},{default:i(()=>[...t[16]||(t[16]=[o("h2",{class:"popup-title"},"Сохранить перед выходом?",-1),o("p",{class:"popup-text"},"Без сохранения все изменения будут потеряны!",-1)])]),_:1},8,["onCancel","onConfirm"]),l(E,{ref_key:"deleteSinglePopupRef",ref:g,"confirm-style":"red","confirm-text":"Удалить","cancel-text":"Отменить",onConfirm:t[12]||(t[12]=n=>e(C)(e(g))),onCancel:t[13]||(t[13]=n=>e(C)(e(g)))},{default:i(()=>[...t[17]||(t[17]=[o("h2",{class:"popup-title"}," Удалить объект? ",-1)])]),_:1},512),l(oe,{ref_key:"saveNotifyRef",ref:H},{default:i(()=>[...t[18]||(t[18]=[o("img",{src:le},null,-1),o("span",null,"Изменения сохранены",-1)])]),_:1},512),l(E,{ref_key:"deleteSelectedPopupRef",ref:$,"confirm-style":"red","confirm-text":"Удалить","cancel-text":"Отменить",onConfirm:e(Y),onCancel:t[14]||(t[14]=n=>e(C)(e($)))},{default:i(()=>[o("h2",Ae,[t[19]||(t[19]=u(" Удалить объекты ",-1)),t[20]||(t[20]=o("br",null,null,-1)),u(" "+N(e(v)),1)])]),_:1},8,["onConfirm"])],64))}},_e=I(Be,[["__scopeId","data-v-77de318b"]]);export{_e as default};
