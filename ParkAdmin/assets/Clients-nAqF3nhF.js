import{B as je,_ as Se}from"./BottomNotify-B40j8qxh.js";import{_ as U,a as $e,b as we,P as Te,c as Oe,e as Pe,d as E}from"./vue-3-slider-component-lab0IWlZ.js";import{T as xe}from"./CustomOpenIndicator-DDrFPNUG.js";import{B as k}from"./BaseButton-CNUrt7E6.js";import{_ as Ae}from"./close-icon-DcnZ6QH4.js";import{_ as Me,D as De,a as Fe}from"./shift-icon-Dnx1g3Gh.js";import{g as x,o as C,s as Be,w as a,a as s,b as l,t as V,d as p,_ as Ne,e as qe,c as P,j as He,F as I,x as Ue,u as e,z as Ve,y as Ie}from"./index-iaVJZ9tw.js";import{u as Le,_ as ze}from"./useClients-CQLrztCb.js";import{_ as Ge}from"./plus-icon-lxHPDhbU.js";import{T as Je}from"./TableModal-DR_FmA9s.js";import{_ as O}from"./FormSelectField-DKGRwksg.js";import{u as Ke,O as Qe}from"./useObjects-CCA0ScS_.js";import{o as c,c as u}from"./modal-DRTCzFhK.js";import"./FormField-DFyU_dJ9.js";import"./SecondaryTable-8zNcad-4.js";import"./FilterSortSearch-SdFdygUQ.js";import"./FilterSortDate-CuMhXrGb.js";const We={__name:"ClientsToolbar",props:{hasSelection:Boolean,selectedCount:Number,statusOptions:Array},emits:["deselect-all","delete-selected","open-mass-editor","change-status"],setup(r,{emit:d}){const m=d;return(b,n)=>(C(),x(Te,null,Be({right:a(()=>[l(k,{class:"small-btn",onClick:n[4]||(n[4]=f=>m("open-settings"))},{default:a(()=>[...n[9]||(n[9]=[s("img",{src:$e},null,-1)])]),_:1}),l(k,{class:"small-btn"},{default:a(()=>[...n[10]||(n[10]=[s("img",{src:we},null,-1)])]),_:1})]),_:2},[r.hasSelection?{name:"left",fn:a(()=>[s("div",{class:"selected-count controller-item",onClick:n[0]||(n[0]=f=>m("deselect-all"))},[s("span",null,"Выбрано: "+V(r.selectedCount),1),l(k,{class:"btn-filled"},{default:a(()=>[...n[5]||(n[5]=[s("img",{src:Ae},null,-1)])]),_:1})]),s("div",{class:"delete-row controller-item",onClick:n[1]||(n[1]=f=>m("delete-selected"))},[...n[6]||(n[6]=[s("img",{src:U},null,-1),p(" Удалить ",-1)])]),s("div",{class:"edit controller-item",onClick:n[2]||(n[2]=f=>m("open-mass-editor"))},[...n[7]||(n[7]=[s("img",{src:Me},null,-1),p(" Редактировать ",-1)])]),l(De,{class:"change-status controller-item","dropdown-list":r.statusOptions,onChange:n[3]||(n[3]=f=>m("change-status",f))},{default:a(()=>[...n[8]||(n[8]=[s("img",{src:Fe},null,-1),p(" Изменить статус ",-1)])]),_:1},8,["dropdown-list"])]),key:"0"}:void 0]),1024))}},Xe={action:"#"},Ye=["onClick"],Ze=Object.assign({inheritAttrs:!1},{__name:"ClientsMassEditor",props:{tabs:Array,customClass:String,headerTitle:String,massEditorFields:Array,massEditorParams:Array},emits:["close-click","save-click","add-mass-editor-fields-row","remove-mass-editor-field"],setup(r,{expose:d,emit:m}){const b=m,n=qe(null);return d({open:()=>n.value.open(),close:()=>n.value.close()}),(f,i)=>(C(),x(Je,{tabs:r.tabs,"custom-class":r.customClass,"header-title":r.headerTitle,onSaveClick:i[1]||(i[1]=v=>b("save-click")),onCloseClick:i[2]||(i[2]=v=>b("close-click")),ref_key:"massEditorRef",ref:n},{edit:a(()=>[s("form",Xe,[i[5]||(i[5]=s("h3",null,"Редактирование выбранных клиентов",-1)),i[6]||(i[6]=s("div",{class:"d-flex"},[s("span",{class:"fields-label"},"Параметр"),s("span",{class:"fields-label"},"До изменения"),s("span",{class:"fields-label"},"После изменения")],-1)),(C(!0),P(I,null,He(r.massEditorFields,(v,g)=>(C(),P("div",{class:"fields-row",key:g},[l(O,{options:r.massEditorParams,width:160},null,8,["options"]),l(O,{options:r.massEditorParams,width:160},null,8,["options"]),l(O,{options:r.massEditorParams,width:160},null,8,["options"]),s("button",{type:"button",class:"delete-row",onClick:A=>b("remove-mass-editor-field",g)},[...i[3]||(i[3]=[s("img",{src:U},null,-1)])],8,Ye)]))),128)),s("button",{type:"button",class:"add-fields-btn",onClick:i[0]||(i[0]=v=>b("add-mass-editor-fields-row"))},[...i[4]||(i[4]=[s("img",{src:Ge},null,-1),p(" Добавить изменения ",-1)])])])]),_:1},8,["tabs","custom-class","header-title"]))}}),_e=Ne(Ze,[["__scopeId","data-v-b6bb0eb5"]]),he={class:"page"},et={class:"page-content"},tt={class:"popup-title"},wt={__name:"Clients",setup(r){const{objectEditorRef:d,objectEditorTabs:m,objectEditorFields:b,objectEditorTableColumns:n,objectEditorTableContent:f,objectHasEdited:i,addModalTableRow:v}=Ke(),{clientsStore:g,clientEditor:A,objectsStore:st,mainTableRef:M,tableHeader:L,tableContent:z,tableSettingsHeader:G,hasSelection:J,selectedCount:K,selectedRows:ot,selectedRowsName:Q,deleteSelectedPopupRef:D,deleteSinglePopupRef:y,savePopupRef:j,saveObjectPopupRef:S,saveNotifyRef:W,tableSettingsRef:F,requisitesTableRef:nt,financesHistoryTableRef:lt,docsTableRef:it,statusOptionsList:X,massEditorRef:B,massEditorTabs:Y,massEditorParams:Z,massEditorFields:N,clientEditorRef:R,contactsTableRef:at,editorTabs:_,editorData:h,editorContactColumns:ee,editorContactContent:te,clientHasEdited:se,objectsId:rt,editorPinnedObjects:oe,objectsAllNames:ne,showSearchObject:$,editorRequisitesColumns:le,editorRequisitesContent:ie,finances:ae,financeHistoryColumns:re,financeHistoryContent:de,reports:w,editorDocsColumns:me,editorDocsContent:ue,addReportsEmail:fe,onSelectionChanged:pe,deselectAll:be,openDeletePopup:ce,deleteSelected:Ce,saveConfirmClick:T,cancelSaveClick:ve,openMassEditor:Re,addTableRow:q,addMassEditorFieldsRow:ke,changeTableSettings:ge,pinObject:ye,unpinObject:Ee}=Le();return(H,t)=>(C(),P(I,null,[s("main",he,[l(xe,null,{default:a(()=>[l(k,{class:"btn-filled"},{default:a(()=>[...t[25]||(t[25]=[p("Клиенты",-1)])]),_:1}),l(k,{onClick:t[0]||(t[0]=o=>e(Ie).push("/finances"))},{default:a(()=>[...t[26]||(t[26]=[p("Финансы",-1)])]),_:1})]),_:1}),s("div",et,[H.showCalculatedSummary?Ue("",!0):(C(),x(We,{key:0,"has-selection":e(J),"selected-count":e(K),"status-options":e(X),onDeselectAll:e(be),onDeleteSelected:e(ce),onOpenMassEditor:e(Re),onChangeStatus:t[1]||(t[1]=o=>console.log("Status:",o)),onCalculateSummary:H.calculateSummaryItems,onOpenSettings:t[2]||(t[2]=o=>e(c)(e(F)))},null,8,["has-selection","selected-count","status-options","onDeselectAll","onDeleteSelected","onOpenMassEditor","onCalculateSummary"])),l(Oe,{style:{"margin-top":"20px"},data:e(z),columns:e(L),onRowDblclick:t[3]||(t[3]=o=>e(c)(e(R))),onSelectionChanged:e(pe),ref_key:"mainTableRef",ref:M},null,8,["data","columns","onSelectionChanged"])])]),l(ze,{ref_key:"clientEditorRef",ref:R,"header-title":"Парковочный объект: “ТЦ Ромашка”",tabs:e(_),"inner-width":870,"close-on-overlay-click":!1,"disabled-save-btn":!e(se),"editor-data":e(h),"client-editor":e(A),"editor-pinned-objects":e(oe),"objects-all-names":e(ne),"show-search-object":e($),"onUpdate:showSearchObject":t[4]||(t[4]=o=>Ve($)?$.value=o:null),finances:e(ae),reports:e(w),"editor-contact-columns":e(ee),"editor-contact-content":e(te),"editor-requisites-columns":e(le),"editor-requisites-content":e(ie),"finance-history-columns":e(re),"finance-history-content":e(de),"editor-docs-columns":e(me),"editor-docs-content":e(ue),onOverlayClick:t[5]||(t[5]=o=>e(c)(e(j))),onSaveClick:e(T),onCloseClick:t[6]||(t[6]=o=>e(u)(e(R))),onAddContactRow:t[7]||(t[7]=o=>e(q)(e(R).contactsTable)),onAddRequisitesRow:t[8]||(t[8]=o=>e(q)(e(R).requisitesTable)),onPinObject:e(ye),onUnpinObject:e(Ee),onAddReportsEmail:e(fe),onOpenObjectEditor:t[9]||(t[9]=o=>e(c)(e(d))),onToggleEmailField:t[10]||(t[10]=o=>e(w).showEmailField=o),onRemoveReportEmail:t[11]||(t[11]=o=>e(w).emailsToSend.splice(o,1))},null,8,["tabs","disabled-save-btn","editor-data","client-editor","editor-pinned-objects","objects-all-names","show-search-object","finances","reports","editor-contact-columns","editor-contact-content","editor-requisites-columns","editor-requisites-content","finance-history-columns","finance-history-content","editor-docs-columns","editor-docs-content","onSaveClick","onPinObject","onUnpinObject","onAddReportsEmail"]),l(Qe,{"header-title":"Парковочный объект: “ТЦ Ромашка”",tabs:e(m),"inner-width":870,"close-on-overlay-click":!1,"disabled-save-btn":!e(i),"object-has-edited":e(i),"object-editor-fields":e(b),"object-editor-table-columns":e(n),"object-editor-table-content":e(f),onOverlayClick:t[12]||(t[12]=o=>e(c)(e(j))),onSaveClick:e(T),onCloseClick:t[13]||(t[13]=o=>e(u)(e(d))),onAddModalTableRow:t[14]||(t[14]=o=>e(v)(e(d).contactsTable)),onOpenDeletePopup:t[15]||(t[15]=o=>e(c)(e(y))),ref_key:"objectEditorRef",ref:d},null,8,["tabs","disabled-save-btn","object-has-edited","object-editor-fields","object-editor-table-columns","object-editor-table-content","onSaveClick"]),l(_e,{tabs:e(Y),"custom-class":"mass-editor-modal","header-title":"Выбрано: 3","mass-editor-fields":e(N),"mass-editor-params":e(Z),onSaveClick:t[16]||(t[16]=o=>console.log("Changes saved!")),onCloseClick:t[17]||(t[17]=o=>e(u)(e(B))),onAddMassEditorFieldsRow:e(ke),onRemoveMassEditorField:t[18]||(t[18]=o=>e(N).splice(o,1)),ref_key:"massEditorRef",ref:B},null,8,["tabs","mass-editor-fields","mass-editor-params","onAddMassEditorFieldsRow"]),l(Pe,{"table-columns":e(G),onChange:t[19]||(t[19]=o=>e(ge)(o,e(g),e(M))),ref_key:"tableSettingsRef",ref:F},null,8,["table-columns"]),l(E,{ref_key:"deleteSelectedPopupRef",ref:D,"confirm-style":"red","confirm-text":"Удалить","cancel-text":"Отменить",onConfirm:e(Ce),onCancel:t[20]||(t[20]=o=>e(u)(e(D)))},{default:a(()=>[s("h2",tt,[t[27]||(t[27]=p(" Удалить клиентов? ",-1)),t[28]||(t[28]=s("br",null,null,-1)),p(" "+V(e(Q)),1)])]),_:1},8,["onConfirm"]),l(E,{ref_key:"savePopupRef",ref:j,"confirm-text":"Сохранить","cancel-text":"Не сохранять",onCancel:e(ve),onConfirm:e(T)},{default:a(()=>[...t[29]||(t[29]=[s("h2",{class:"popup-title"},"Сохранить перед выходом?",-1),s("p",{class:"popup-text"},"Без сохранения все изменения будут потеряны!",-1)])]),_:1},8,["onCancel","onConfirm"]),l(E,{ref_key:"saveObjectPopupRef",ref:S,"confirm-text":"Сохранить","cancel-text":"Не сохранять",onCancel:t[21]||(t[21]=o=>e(u)(e(S))),onConfirm:t[22]||(t[22]=o=>(e(u)(e(d)),e(u)(e(S))))},{default:a(()=>[...t[30]||(t[30]=[s("h2",{class:"popup-title"},"Сохранить перед выходом?",-1),s("p",{class:"popup-text"},"Без сохранения все изменения будут потеряны!",-1)])]),_:1},512),l(E,{ref_key:"deleteSinglePopupRef",ref:y,"confirm-style":"red","confirm-text":"Удалить","cancel-text":"Отменить",onConfirm:t[23]||(t[23]=o=>e(u)(e(y))),onCancel:t[24]||(t[24]=o=>e(u)(e(y)))},{default:a(()=>[...t[31]||(t[31]=[s("h2",{class:"popup-title"}," Удалить объект? ",-1)])]),_:1},512),l(je,{ref_key:"saveNotifyRef",ref:W},{default:a(()=>[...t[32]||(t[32]=[s("img",{src:Se},null,-1),s("span",null,"Изменения сохранены",-1)])]),_:1},512)],64))}};export{wt as default};
