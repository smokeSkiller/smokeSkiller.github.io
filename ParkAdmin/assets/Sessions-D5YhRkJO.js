import{_ as H,a as h,b as ee,P as se,c as te,d as A,e as le}from"./vue-3-slider-component-lab0IWlZ.js";import{_ as ne}from"./plus-icon-lxHPDhbU.js";import{g as w,o as u,s as oe,w as i,a as t,b as o,t as L,d as r,_ as ie,c as $,x as F,u as s,F as j,y as ae,z as re,j as me}from"./index-iaVJZ9tw.js";import{T as de}from"./TableModal-DR_FmA9s.js";import{o as d,c as k}from"./modal-DRTCzFhK.js";import{T as ue,k as pe}from"./CustomOpenIndicator-DDrFPNUG.js";import{C as fe}from"./CalculatedSummary-DJJDBlVZ.js";import{B as p}from"./BaseButton-CNUrt7E6.js";import{_ as R}from"./FormSelectField-DKGRwksg.js";import{_ as be,D as ge,a as ve}from"./shift-icon-Dnx1g3Gh.js";import{u as Ce,_ as ye}from"./useSessions-N9QP22lJ.js";import{_ as Se}from"./close-icon-DcnZ6QH4.js";import{_ as $e}from"./summary-icon-BZQwzDv_.js";import{u as ke,_ as Re}from"./usePayments-B8uZ46NC.js";import"./note-icon--KIhCtrW.js";import"./FilterSortDate-CuMhXrGb.js";const we={__name:"SessionsToolbar",props:{hasSelection:Boolean,selectedCount:Number,statusOptions:Array},emits:["deselect-all","delete-selected","open-mass-editor","change-status","calculate-summary"],setup(f,{emit:b}){const a=b;return(D,l)=>(u(),w(se,null,oe({right:i(()=>[o(p,{class:"small-btn",onClick:l[5]||(l[5]=m=>a("open-settings"))},{default:i(()=>[...l[11]||(l[11]=[t("img",{src:h},null,-1)])]),_:1}),o(p,{class:"small-btn"},{default:i(()=>[...l[12]||(l[12]=[t("img",{src:ee},null,-1)])]),_:1})]),_:2},[f.hasSelection?{name:"left",fn:i(()=>[t("div",{class:"selected-count controller-item",onClick:l[0]||(l[0]=m=>a("deselect-all"))},[t("span",null,"Выбрано: "+L(f.selectedCount),1),o(p,{class:"btn-filled"},{default:i(()=>[...l[6]||(l[6]=[t("img",{src:Se},null,-1)])]),_:1})]),t("div",{class:"delete-row controller-item",onClick:l[1]||(l[1]=m=>a("delete-selected"))},[...l[7]||(l[7]=[t("img",{src:H},null,-1),r(" Удалить ",-1)])]),t("div",{class:"edit controller-item",onClick:l[2]||(l[2]=m=>a("open-mass-editor"))},[...l[8]||(l[8]=[t("img",{src:be},null,-1),r(" Редактировать ",-1)])]),o(ge,{class:"change-status controller-item","dropdown-list":f.statusOptions,onChange:l[3]||(l[3]=m=>a("change-status",m))},{default:i(()=>[...l[9]||(l[9]=[t("img",{src:ve},null,-1),r(" Изменить статус ",-1)])]),_:1},8,["dropdown-list"]),t("div",{class:"summary controller-item",onClick:l[4]||(l[4]=m=>a("calculate-summary"))},[...l[10]||(l[10]=[t("img",{src:$e},null,-1),r(" Сумма ",-1)])])]),key:"0"}:void 0]),1024))}},De={class:"page"},xe={class:"page-content"},Ee={class:"popup-title"},Oe={class:"w-100",style:{margin:"20px 0"}},Te={class:"row refund-select"},Pe={action:"#"},Be=["onClick"],Me={__name:"Sessions",setup(f){const{sessionsStore:b,mainTableRef:a,tableHeader:D,tableContent:l,tableSettingsHeader:m,sessionDetailsRef:x,hasSelection:U,selectedCount:E,selectedRowsName:z,deleteSelectedPopupRef:O,tableSettingsRef:T,statusOptionsList:q,showCalculatedSummary:g,summaryItems:G,massEditorRef:P,massEditorTabs:J,massEditorParams:v,massEditorFields:B,onSelectionChanged:K,deselectAll:M,openDeletePopup:Q,deleteSelected:W,openMassEditor:X,addMassEditorFieldsRow:V,changeTableSettings:Y,calculateSummaryItems:Z}=Ce(),{paymentDetailsRef:c,refundPopupRef:C,refundType:y,refundTypeOptions:_,refundConfirmDisabled:N}=ke();return(S,e)=>(u(),$(j,null,[t("main",De,[o(ue,null,{default:i(()=>[o(p,{class:"btn-filled"},{default:i(()=>[...e[18]||(e[18]=[r("Сессии",-1)])]),_:1}),o(p,{onClick:e[0]||(e[0]=n=>s(ae).push("/payments"))},{default:i(()=>[...e[19]||(e[19]=[r("Оплаты",-1)])]),_:1})]),_:1}),t("div",xe,[s(g)?F("",!0):(u(),w(we,{key:0,"has-selection":s(U),"selected-count":s(E),"status-options":s(q),onDeselectAll:s(M),onDeleteSelected:s(Q),onOpenMassEditor:s(X),onChangeStatus:e[1]||(e[1]=n=>console.log("Status:",n)),onCalculateSummary:s(Z),onOpenSettings:e[2]||(e[2]=n=>s(d)(s(T)))},null,8,["has-selection","selected-count","status-options","onDeselectAll","onDeleteSelected","onOpenMassEditor","onCalculateSummary"])),s(g)?(u(),w(fe,{key:1,"selected-text":`${s(E)} сессии`,"title-text":"Данные по выбранным сессиям:",items:s(G),onReset:e[3]||(e[3]=n=>(g.value=!1,s(M)()))},null,8,["selected-text","items"])):F("",!0),o(te,{style:{"margin-top":"20px"},columns:s(D),data:s(l),onRowDblclick:e[4]||(e[4]=n=>s(d)(s(x))),onSelectionChanged:s(K),ref_key:"mainTableRef",ref:a},null,8,["columns","data","onSelectionChanged"])])]),o(ye,{"inner-width":"515","custom-class":"session-details",onOpenPaymentDetails:e[5]||(e[5]=n=>s(d)(s(c))),ref_key:"sessionDetailsRef",ref:x},null,512),o(Re,{"inner-width":"515","custom-class":"payment-details",onOpenObjectsEditor:e[6]||(e[6]=n=>s(d)(S.objectEditorRef)),onOpenClientsEditor:e[7]||(e[7]=n=>s(d)(S.clientEditorRef)),onOpenRefundPopup:e[8]||(e[8]=n=>s(d)(s(C))),ref_key:"paymentDetailsRef",ref:c},null,512),o(A,{ref_key:"deleteSelectedPopupRef",ref:O,"confirm-style":"red","confirm-text":"Удалить","cancel-text":"Отменить",onConfirm:s(W),onCancel:e[9]||(e[9]=n=>s(k)(s(O)))},{default:i(()=>[t("h2",Ee,[e[20]||(e[20]=r(" Удалить сессии? ",-1)),e[21]||(e[21]=t("br",null,null,-1)),r(" "+L(s(z)),1)])]),_:1},8,["onConfirm"]),o(A,{ref_key:"refundPopupRef",ref:C,"custom-class":"refund-payment-popup","confirm-text":"Подтвердить возврат","cancel-text":"Отмена","disabled-confirm-btn":s(N),onCancel:e[12]||(e[12]=n=>s(k)(s(C))),onConfirm:e[13]||(e[13]=n=>console.log("Возврат подтвержден"))},{default:i(()=>[e[23]||(e[23]=t("h2",{class:"popup-title"},"Возврат денежных средств",-1)),e[24]||(e[24]=t("div",{class:"row"},[t("p",null,"Сумма к возврату"),t("p",null,[t("b",null,"450 ₽")])],-1)),e[25]||(e[25]=t("div",{class:"row"},[t("p",null,"Номер чека"),t("p",null,[t("b",null,"12345")])],-1)),t("div",Oe,[t("div",Te,[e[22]||(e[22]=t("p",null,"Причина возврата",-1)),o(s(pe),{modelValue:s(y),"onUpdate:modelValue":[e[10]||(e[10]=n=>re(y)?y.value=n:null),e[11]||(e[11]=n=>N.value=!1)],placeholder:"Выберите из списка",options:s(_),clearable:!1,searchable:!1,components:{OpenIndicator:S.OpenIndicator}},null,8,["modelValue","options","components"])])]),e[26]||(e[26]=t("div",{class:"comment"},[t("label",{for:"refund-comment"},"Комментарий:"),t("textarea",{name:"refund-comment",id:"refund-comment"})],-1))]),_:1},8,["disabled-confirm-btn"]),o(de,{tabs:s(J),"custom-class":"mass-editor-modal","header-title":"Выбрано: 3",onSaveClick:e[15]||(e[15]=n=>console.log("Changes saved!")),onCloseClick:e[16]||(e[16]=n=>s(k)(s(P))),ref_key:"massEditorRef",ref:P},{edit:i(()=>[t("form",Pe,[e[29]||(e[29]=t("h3",null,"Редактирование выбранных объектов",-1)),e[30]||(e[30]=t("div",{class:"d-flex"},[t("span",{class:"fields-label"},"Параметр"),t("span",{class:"fields-label"},"До изменения"),t("span",{class:"fields-label"},"После изменения")],-1)),(u(!0),$(j,null,me(s(B),(n,I)=>(u(),$("div",{class:"fields-row",key:I},[o(R,{options:s(v)},null,8,["options"]),o(R,{options:s(v)},null,8,["options"]),o(R,{options:s(v)},null,8,["options"]),t("button",{type:"button",class:"delete-row",onClick:Ve=>s(B).splice(I,1)},[...e[27]||(e[27]=[t("img",{src:H},null,-1)])],8,Be)]))),128)),t("button",{type:"button",class:"add-fields-btn",onClick:e[14]||(e[14]=(...n)=>s(V)&&s(V)(...n))},[...e[28]||(e[28]=[t("img",{src:ne},null,-1),r(" Добавить изменения ",-1)])])])]),_:1},8,["tabs"]),o(le,{"table-columns":s(m),onChange:e[17]||(e[17]=n=>s(Y)(n,s(b),s(a))),ref_key:"tableSettingsRef",ref:T},null,8,["table-columns"])],64))}},Xe=ie(Me,[["__scopeId","data-v-3a976c0f"]]);export{Xe as default};
