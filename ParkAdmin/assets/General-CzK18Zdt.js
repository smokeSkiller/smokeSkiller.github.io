import{c as N,u as G,P as H,d as U,e as B,f as A,a as M,b as D,_ as I}from"./vue-3-slider-component-DVLLiOr3.js";import{B as q,_ as z}from"./BottomNotify-BTbGL-ds.js";import{T as J}from"./TableModal-p6TpcjEn.js";import{T as K}from"./CustomOpenIndicator-BQQZUi6w.js";import{B as v}from"./BaseButton-BUPZcaam.js";import{F as E}from"./FormField-5cKzPise.js";import{_ as L}from"./FormSelectField-BrAB1vmC.js";import{_ as Q}from"./SecondaryTable-DySUWM44.js";import{x as W,y as X,e as c,i as x,_ as Y,c as Z,a,b as l,w as n,u as t,F as h,o as ee,B as V,d as b}from"./index-BWF_qH93.js";import{c as C,o as T}from"./modal-DRTCzFhK.js";const P=W("general",{state:()=>({mainTable:{columns:[{field:"name",title:"Название",headerSort:!1},{field:"service",title:"Тип услуг",headerSort:!1},{field:"status",title:"Статус",headerSort:!1,formatter:function(o){const r=o.getValue();return{active:'<span class="status status-paid">Активна</span>',canceled:'<span class="status status-canceled">Отменена</span>'}[r]??r}}],content:[{name:'ООО "ВидеоСистемы"',service:"Видеонаблюдение",status:"active"},{name:'ООО "СейфГарант"',service:"Терминалы",status:"active"},{name:'ООО "ВидеоСистемы"',service:"Видеонаблюдение",status:"active"},{name:'ООО "СейфГарант"',service:"Терминалы",status:"active"},{name:'ООО "ВидеоСистемы"',service:"Видеонаблюдение",status:"active"},{name:'ООО "СейфГарант"',service:"Терминалы",status:"active"},{name:'ООО "ВидеоСистемы"',service:"Видеонаблюдение",status:"active"},{name:'ООО "СейфГарант"',service:"Терминалы",status:"active"},{name:'ООО "ВидеоСистемы"',service:"Видеонаблюдение",status:"active"},{name:'ООО "СейфГарант"',service:"Терминалы",status:"active"}]},editor:{tabs:[{name:"data",label:"Общая информация"}],fields:{service:"Видеонаблюдение",status:"Активен",statusOptions:[{value:"active",label:"Активен"},{value:"inactive",label:"Неактивен"}],phone:"+7 (495) 123-45-67",email:"info@videomaster.ru"},objectsTable:{columns:[{field:"name",title:"Название",headerSort:!1},{field:"client",title:"Клиент",headerSort:!1},{field:"country",title:"Страна",headerSort:!1,width:75},{field:"city",title:"Город",headerSort:!1,width:75},{field:"address",title:"Адрес",headerSort:!1}],content:[{name:"ТЦ Ромашка",client:'ООО "ВидеоСистемы"',country:"Россия",city:"Пенза",address:"Светлая, 13"},{name:"ТЦ Метрополис",client:"ООО “Спирит”",country:"Россия",city:"Москва",address:"Промышленная, 1к3"},{name:"ТЦ Ромашка",client:'ООО "ВидеоСистемы"',country:"Россия",city:"Пенза",address:"Светлая, 13"},{name:"ТЦ Метрополис",client:"ООО “Спирит”",country:"Россия",city:"Москва",address:"Промышленная, 1к3"},{name:"ТЦ Ромашка",client:'ООО "ВидеоСистемы"',country:"Россия",city:"Пенза",address:"Светлая, 13"},{name:"ТЦ Метрополис",client:"ООО “Спирит”",country:"Россия",city:"Москва",address:"Промышленная, 1к3"},{name:"ТЦ Ромашка",client:'ООО "ВидеоСистемы"',country:"Россия",city:"Пенза",address:"Светлая, 13"},{name:"ТЦ Метрополис",client:"ООО “Спирит”",country:"Россия",city:"Москва",address:"Промышленная, 1к3"}]}}})});function te(){return{applyFiltersToColumns:(r,m,f)=>m.map(i=>i.field==="name"?{...i,headerClickPopup(){const d=document.createElement("div");return X(N,{onSelectSortOrder(){f(r,"name")}}).mount(d),d}}:i)}}function le(){const o=P(),r=c(null),m=c(null),f=c(null),i=c(null),d=c(null),p=c(o.editor.tabs),S=x(()=>o.editor.fields),k=x(()=>o.editor.objectsTable),g=c(!1);return o.$subscribe(($,u)=>{g.value=!0}),{generalEditorRef:r,generalObjectsRef:m,savePopupRef:f,saveNotifyRef:i,deleteSinglePopupRef:d,generalEditorTabs:p,generalEditorFields:S,generalEditorObjects:k,generalHasEdited:g,saveConfirmClick:()=>{C(f.value),T(i.value),setTimeout(()=>C(i.value),3e3)},cancelSaveClick:()=>{C(f.value),C(r.value)}}}function se(){const o=P(),r=G(),{addResetFilterBtn:m,changeTableSettings:f}=r,i=c(null),d=x(()=>o.mainTable.columns),p=x(()=>o.mainTable.content),S=c(null),k=d.value.map(y=>({field:y.field,title:y.title})),{applyFiltersToColumns:g}=te();o.mainTable.columns=g(i,d.value,m);const R=le();return{generalStore:o,mainTableRef:i,tableHeader:d,tableContent:p,tableSettingsHeader:k,tableSettingsRef:S,...R,changeTableSettings:f}}const ae={class:"page"},ne={class:"page-content"},oe={action:"#"},ie={class:"fields-group"},re={class:"field-outer"},de={class:"fields-group"},ue={class:"d-flex justify-content-between align-items-center w-100",style:{"margin-top":"30px"}},me={__name:"General",setup(o){const{generalStore:r,mainTableRef:m,tableHeader:f,tableContent:i,tableSettingsHeader:d,deleteSinglePopupRef:p,savePopupRef:S,saveNotifyRef:k,tableSettingsRef:g,generalObjectsRef:R,generalEditorRef:y,generalEditorTabs:$,generalEditorFields:u,generalEditorObjects:w,generalHasEdited:_,saveConfirmClick:F,cancelSaveClick:j,changeTableSettings:O}=se();return(fe,e)=>(ee(),Z(h,null,[a("main",ae,[l(K,null,{default:n(()=>[l(v,{onClick:e[0]||(e[0]=s=>t(V).push("/employers"))},{default:n(()=>[...e[15]||(e[15]=[b("Сотрудники",-1)])]),_:1}),l(v,{onClick:e[1]||(e[1]=s=>t(V).push("/roles"))},{default:n(()=>[...e[16]||(e[16]=[b("Управление ролями",-1)])]),_:1}),l(v,{onClick:e[2]||(e[2]=s=>t(V).push("/myprofile"))},{default:n(()=>[...e[17]||(e[17]=[b("Мой профиль",-1)])]),_:1}),l(v,{class:"btn-filled"},{default:n(()=>[...e[18]||(e[18]=[b("Общие настройки сервиса",-1)])]),_:1})]),_:1}),a("div",ne,[l(H,null,{left:n(()=>[...e[19]||(e[19]=[])]),right:n(()=>[l(v,{class:"small-btn",onClick:e[3]||(e[3]=s=>t(T)(t(g)))},{default:n(()=>[...e[20]||(e[20]=[a("img",{src:M},null,-1)])]),_:1}),l(v,{class:"small-btn"},{default:n(()=>[...e[21]||(e[21]=[a("img",{src:D},null,-1)])]),_:1})]),_:1}),l(U,{style:{"margin-top":"20px"},id:"general-table",data:t(i),columns:t(f),onRowDblclick:e[4]||(e[4]=s=>t(T)(t(y))),ref_key:"mainTableRef",ref:m},null,8,["data","columns"])])]),l(J,{"header-title":"Контрагент ООО “ВидеоСистемы”",tabs:t($),"inner-width":870,"close-on-overlay-click":!1,"disabled-save-btn":!t(_),onOverlayClick:e[10]||(e[10]=s=>t(T)(t(S))),onSaveClick:t(F),onCloseClick:e[11]||(e[11]=s=>t(C)(t(y))),ref_key:"generalEditorRef",ref:y},{data:n(()=>[a("form",oe,[e[23]||(e[23]=a("h3",null,"Данные контрагента",-1)),a("div",ie,[l(E,{name:"name",modelValue:t(u).service,"onUpdate:modelValue":e[5]||(e[5]=s=>t(u).service=s),label:"Тип услуг","label-width":"90"},null,8,["modelValue"]),a("div",re,[e[22]||(e[22]=a("label",{style:{width:"90px"}},"Статус",-1)),l(L,{modelValue:t(u).status,"onUpdate:modelValue":e[6]||(e[6]=s=>t(u).status=s),options:t(u).statusOptions},null,8,["modelValue","options"])])]),a("div",de,[l(E,{name:"phone",modelValue:t(u).phone,"onUpdate:modelValue":e[7]||(e[7]=s=>t(u).phone=s),label:"Телефон","label-width":"90"},null,8,["modelValue"]),l(E,{name:"email",modelValue:t(u).email,"onUpdate:modelValue":e[8]||(e[8]=s=>t(u).email=s),label:"E-mail","label-width":"90"},null,8,["modelValue"])])]),a("div",ue,[e[25]||(e[25]=a("h3",{style:{"margin-bottom":"0"}},"Связанные объекты",-1)),l(v,{class:"btn-filled"},{default:n(()=>[...e[24]||(e[24]=[b("Прикрепить объект",-1)])]),_:1})]),l(Q,{style:{"margin-top":"30px"},columns:t(w).columns,data:t(w).content,"row-height":"45",ref_key:"generalObjectsRef",ref:R},null,8,["columns","data"])]),"sidebar-bottom":n(()=>[l(v,{class:"remove-object-btn",onClick:e[9]||(e[9]=s=>t(T)(t(p)))},{default:n(()=>[...e[26]||(e[26]=[a("img",{src:I},null,-1),b(" Удалить объект ",-1)])]),_:1})]),_:1},8,["tabs","disabled-save-btn","onSaveClick"]),l(B,{ref_key:"savePopupRef",ref:S,"confirm-text":"Сохранить","cancel-text":"Не сохранять",onCancel:t(j),onConfirm:t(F)},{default:n(()=>[...e[27]||(e[27]=[a("h2",{class:"popup-title"},"Сохранить перед выходом?",-1),a("p",{class:"popup-text"},"Без сохранения все изменения будут потеряны!",-1)])]),_:1},8,["onCancel","onConfirm"]),l(B,{ref_key:"deleteSinglePopupRef",ref:p,"confirm-style":"red","confirm-text":"Удалить","cancel-text":"Отменить",onConfirm:e[12]||(e[12]=s=>t(C)(t(p))),onCancel:e[13]||(e[13]=s=>t(C)(t(p)))},{default:n(()=>[...e[28]||(e[28]=[a("h2",{class:"popup-title"},[b(" Удалить сотрудника? "),a("br"),b(" Петров Сергей Иванович? ")],-1)])]),_:1},512),l(q,{ref_key:"saveNotifyRef",ref:k},{default:n(()=>[...e[29]||(e[29]=[a("img",{src:z},null,-1),a("span",null,"Изменения сохранены",-1)])]),_:1},512),l(A,{"table-columns":t(d),onChange:e[14]||(e[14]=s=>t(O)(s,t(r),t(m))),ref_key:"tableSettingsRef",ref:g},null,8,["table-columns"])],64))}},Re=Y(me,[["__scopeId","data-v-5cf75203"]]);export{Re as default};
