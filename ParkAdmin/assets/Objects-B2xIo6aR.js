import{_ as ae}from"./close-icon-DcnZ6QH4.js";import{P as de,a as re,c as me,b as y,d as V,e as ue,f as pe}from"./vue-3-slider-component-CbaC0ZGR.js";import{_ as fe,D as be,a as ve}from"./DropdownRadio-BAhia4Xe.js";import{C as Ce,_ as ge}from"./CalculatedSummary-BZKp5kui.js";import{_ as M}from"./plus-icon-lxHPDhbU.js";import{B as ke,_ as ye}from"./BottomNotify-DXnomjU2.js";import{T as O}from"./TableModal-BpXQBRhF.js";import{T as Ve}from"./CustomOpenIndicator-DBeq1Fbz.js";import{B as r}from"./BaseButton-DTRLxGU6.js";import{F as m}from"./FormField-u5Va7GBa.js";import{_ as d}from"./FormSelectField-CkD8ax8O.js";import{_ as Se}from"./SecondaryTable-DQ1wqC0o.js";import{u as Re}from"./useObjects-CIN9K8GS.js";import{o as u,c as v}from"./modal-DRTCzFhK.js";import{_ as $e,c as S,a as t,b as s,w as i,g as D,z as H,u as l,A as je,F as I,o as p,d as a,t as Z,j as xe}from"./index-B567c83m.js";import"./useObjectsEditor-Cjk_tyHx.js";import"./FilterSortSearch-Bj1mziqT.js";import"./FilterSortDate-D6o0gEk7.js";const Ee={class:"page"},Te={class:"page-content"},we={action:"#"},Ue={class:"fields-group"},Pe={class:"field-outer"},Be={class:"fields-group"},Fe={class:"field-outer"},Ne={class:"fields-group"},Me={class:"field-outer"},Oe={class:"field-outer"},De={class:"fields-group"},He={class:"field-outer"},Ie={class:"field-outer"},Ze={action:"#"},ze=["onClick"],Ae={class:"popup-title"},Le={__name:"Objects",setup(qe){const{objectsStore:z,mainTableRef:R,tableHeader:A,tableContent:L,tableSettingsHeader:q,hasSelection:G,selectedCount:$,selectedRowsName:J,deleteSelectedPopupRef:j,deleteSinglePopupRef:f,savePopupRef:x,saveNotifyRef:K,tableSettingsRef:E,statusOptionsList:Q,showCalculatedSummary:C,summaryItems:W,massEditorRef:X,massEditorTabs:Y,massEditorParams:g,massEditorFields:T,objectEditorRef:b,objectContactsTableRef:c,objectEditorTabs:_,objectEditorFields:n,objectEditorTableColumns:h,objectEditorTableContent:ee,objectHasEdited:le,onSelectionChanged:te,deselectAll:k,openDeletePopup:w,deleteSelected:oe,saveConfirmClick:U,cancelSaveClick:se,openMassEditor:P,addModalTableRow:ne,addMassEditorFieldsRow:B,changeTableSettings:ie,calculateSummaryItems:F}=Re();return(Ge,e)=>(p(),S(I,null,[t("main",Ee,[s(Ve,null,{default:i(()=>[s(r,{class:"btn-filled"},{default:i(()=>[...e[29]||(e[29]=[a("Объекты",-1)])]),_:1})]),_:1}),t("div",Te,[l(C)?H("",!0):(p(),D(de,{key:0},je({right:i(()=>[s(r,{class:"btn-filled add-element-btn",onClick:e[5]||(e[5]=o=>l(u)(l(b)))},{default:i(()=>[...e[35]||(e[35]=[t("img",{src:M},null,-1),a(" Добавить новый объект ",-1)])]),_:1}),s(r,{class:"small-btn",onClick:e[6]||(e[6]=o=>l(u)(l(E)))},{default:i(()=>[...e[36]||(e[36]=[t("img",{src:ue},null,-1)])]),_:1}),s(r,{class:"small-btn"},{default:i(()=>[...e[37]||(e[37]=[t("img",{src:pe},null,-1)])]),_:1})]),_:2},[l(G)==!0?{name:"left",fn:i(()=>[t("div",{class:"selected-count controller-item",onClick:e[0]||(e[0]=(...o)=>l(k)&&l(k)(...o))},[t("span",null,"Выбрано: "+Z(l($)),1),s(r,{class:"btn-filled"},{default:i(()=>[...e[30]||(e[30]=[t("img",{src:ae},null,-1)])]),_:1})]),t("div",{class:"delete-row controller-item",onClick:e[1]||(e[1]=(...o)=>l(w)&&l(w)(...o))},[...e[31]||(e[31]=[t("img",{src:V},null,-1),a(" Удалить ",-1)])]),t("div",{class:"edit controller-item",onClick:e[2]||(e[2]=(...o)=>l(P)&&l(P)(...o))},[...e[32]||(e[32]=[t("img",{src:fe},null,-1),a(" Редактировать ",-1)])]),s(be,{class:"change-status controller-item","dropdown-list":l(Q),onChange:e[3]||(e[3]=o=>console.log("Status changed to: ",o))},{default:i(()=>[...e[33]||(e[33]=[t("img",{src:ve},null,-1),a(" Изменить статус ",-1)])]),_:1},8,["dropdown-list"]),t("div",{class:"summary controller-item",onClick:e[4]||(e[4]=(...o)=>l(F)&&l(F)(...o))},[...e[34]||(e[34]=[t("img",{src:ge},null,-1),a(" Сумма ",-1)])])]),key:"0"}:void 0]),1024)),l(C)?(p(),D(Ce,{key:1,"selected-text":`${l($)} объектов`,"title-text":"Данные по выбранным объектам:",items:l(W),onReset:e[7]||(e[7]=o=>(C.value=!1,l(k)()))},null,8,["selected-text","items"])):H("",!0),s(re,{style:{"margin-top":"20px"},data:l(L),columns:l(A),onRowDblclick:e[8]||(e[8]=o=>l(u)(l(b))),onSelectionChanged:l(te),ref_key:"mainTableRef",ref:R},null,8,["data","columns","onSelectionChanged"])])]),s(O,{"header-title":"Парковочный объект: “ТЦ Ромашка”",tabs:l(_),"inner-width":870,"close-on-overlay-click":!1,"disabled-save-btn":!l(le),onOverlayClick:e[21]||(e[21]=o=>l(u)(l(x))),onSaveClick:l(U),onCloseClick:e[22]||(e[22]=o=>l(v)(l(b))),ref_key:"objectEditorRef",ref:b},{data:i(()=>[t("form",we,[e[44]||(e[44]=t("h3",null,"Данные о компании",-1)),t("div",Ue,[s(m,{items:l(n).clients,name:"client",modelValue:l(n).client,"onUpdate:modelValue":e[9]||(e[9]=o=>l(n).client=o),label:"Клиент"},null,8,["items","modelValue"]),s(m,{name:"object",modelValue:l(n).object,"onUpdate:modelValue":e[10]||(e[10]=o=>l(n).object=o),label:"Объект"},null,8,["modelValue"]),t("div",Pe,[e[38]||(e[38]=t("label",null,"Статус",-1)),s(d,{modelValue:l(n).status,"onUpdate:modelValue":e[11]||(e[11]=o=>l(n).status=o),options:l(n).statusOptions},null,8,["modelValue","options"])]),s(m,{name:"domain",modelValue:l(n).domain,"onUpdate:modelValue":e[12]||(e[12]=o=>l(n).domain=o),label:"Домен объекта"},null,8,["modelValue"])]),t("div",Be,[t("div",Fe,[e[39]||(e[39]=t("label",null,[a("Фиск. "),t("br"),a(" сервис")],-1)),s(d,{modelValue:l(n).fiscalService,"onUpdate:modelValue":e[13]||(e[13]=o=>l(n).fiscalService=o),options:l(n).fiscalServices,name:"fiscal-service"},null,8,["modelValue","options"])]),s(m,{name:"check-email",modelValue:l(n).checkEmail,"onUpdate:modelValue":e[14]||(e[14]=o=>l(n).checkEmail=o),label:"E-mail <br> для чеков"},null,8,["modelValue"])]),t("div",Ne,[t("div",Me,[e[40]||(e[40]=t("label",null,"Страна",-1)),s(d,{modelValue:l(n).country,"onUpdate:modelValue":e[15]||(e[15]=o=>l(n).country=o),options:l(n).countries,name:"country"},null,8,["modelValue","options"])]),s(m,{name:"address",modelValue:l(n).address,"onUpdate:modelValue":e[16]||(e[16]=o=>l(n).address=o),label:"Адрес"},null,8,["modelValue"]),t("div",Oe,[e[41]||(e[41]=t("label",null,"Час. пояс",-1)),s(d,{modelValue:l(n).timeZone,"onUpdate:modelValue":e[17]||(e[17]=o=>l(n).timeZone=o),options:l(n).timeZones,name:"timezone"},null,8,["modelValue","options"])])]),t("div",De,[t("div",He,[e[42]||(e[42]=t("label",null,"Валюта",-1)),s(d,{modelValue:l(n).currency,"onUpdate:modelValue":e[18]||(e[18]=o=>l(n).currency=o),options:l(n).currencies,name:"currency"},null,8,["modelValue","options"])]),t("div",Ie,[e[43]||(e[43]=t("label",null,"Язык",-1)),s(d,{modelValue:l(n).lang,"onUpdate:modelValue":e[19]||(e[19]=o=>l(n).lang=o),options:l(n).langs,name:"lang"},null,8,["modelValue","options"])])])])]),contact:i(()=>[e[46]||(e[46]=t("h3",null,"Контактные лица",-1)),s(Se,{style:{"margin-top":"20px"},columns:l(h),data:l(ee),ref_key:"objectContactsTableRef",ref:c},null,8,["columns","data"]),s(r,{style:{"margin-top":"20px"},onClick:l(ne)},{default:i(()=>[...e[45]||(e[45]=[a("Добавить",-1)])]),_:1},8,["onClick"])]),"sidebar-bottom":i(()=>[s(r,{class:"remove-object-btn",onClick:e[20]||(e[20]=o=>l(u)(l(f)))},{default:i(()=>[...e[47]||(e[47]=[t("img",{src:V},null,-1),a(" Удалить объект ",-1)])]),_:1})]),_:1},8,["tabs","disabled-save-btn","onSaveClick"]),s(O,{tabs:l(Y),"custom-class":"mass-editor-modal","header-title":"Выбрано: 3",onSaveClick:e[24]||(e[24]=o=>console.log("Changes saved!")),ref_key:"massEditorRef",ref:X},{edit:i(()=>[t("form",Ze,[e[50]||(e[50]=t("h3",null,"Редактирование выбранных объектов",-1)),e[51]||(e[51]=t("div",{class:"d-flex"},[t("span",{class:"fields-label"},"Параметр"),t("span",{class:"fields-label"},"До изменения"),t("span",{class:"fields-label"},"После изменения")],-1)),(p(!0),S(I,null,xe(l(T),(o,N)=>(p(),S("div",{class:"fields-row",key:N},[s(d,{options:l(g)},null,8,["options"]),s(d,{options:l(g)},null,8,["options"]),s(d,{options:l(g)},null,8,["options"]),t("button",{type:"button",class:"delete-row",onClick:Je=>l(T).splice(N,1)},[...e[48]||(e[48]=[t("img",{src:V},null,-1)])],8,ze)]))),128)),t("button",{type:"button",class:"add-fields-btn",onClick:e[23]||(e[23]=(...o)=>l(B)&&l(B)(...o))},[...e[49]||(e[49]=[t("img",{src:M},null,-1),a(" Добавить изменения ",-1)])])])]),_:1},8,["tabs"]),s(me,{"table-columns":l(q),onChange:e[25]||(e[25]=o=>l(ie)(o,l(z),l(R))),ref_key:"tableSettingsRef",ref:E},null,8,["table-columns"]),s(y,{ref_key:"savePopupRef",ref:x,"confirm-text":"Сохранить","cancel-text":"Не сохранять",onCancel:l(se),onConfirm:l(U)},{default:i(()=>[...e[52]||(e[52]=[t("h2",{class:"popup-title"},"Сохранить перед выходом?",-1),t("p",{class:"popup-text"},"Без сохранения все изменения будут потеряны!",-1)])]),_:1},8,["onCancel","onConfirm"]),s(y,{ref_key:"deleteSinglePopupRef",ref:f,"confirm-style":"red","confirm-text":"Удалить","cancel-text":"Отменить",onConfirm:e[26]||(e[26]=o=>l(v)(l(f))),onCancel:e[27]||(e[27]=o=>l(v)(l(f)))},{default:i(()=>[...e[53]||(e[53]=[t("h2",{class:"popup-title"}," Удалить объект? ",-1)])]),_:1},512),s(ke,{ref_key:"saveNotifyRef",ref:K},{default:i(()=>[...e[54]||(e[54]=[t("img",{src:ye},null,-1),t("span",null,"Изменения сохранены",-1)])]),_:1},512),s(y,{ref_key:"deleteSelectedPopupRef",ref:j,"confirm-style":"red","confirm-text":"Удалить","cancel-text":"Отменить",onConfirm:l(oe),onCancel:e[28]||(e[28]=o=>l(v)(l(j)))},{default:i(()=>[t("h2",Ae,[e[55]||(e[55]=a(" Удалить объекты ",-1)),e[56]||(e[56]=t("br",null,null,-1)),a(" "+Z(l(J)),1)])]),_:1},8,["onConfirm"])],64))}},ml=$e(Le,[["__scopeId","data-v-54e77798"]]);export{ml as default};
