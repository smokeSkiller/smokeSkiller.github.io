import{s as Ge,x as Ce,e as v,y as Je,i as Ve,_ as Qe,c as E,a as l,b as o,w as n,g as we,z as J,A as We,u as t,F as Q,o as S,B as Xe,d as u,t as W,j as ae,l as Ye,C as _e,D as he}from"./index-B567c83m.js";import{_ as el}from"./close-icon-DcnZ6QH4.js";import{_ as ll,u as tl,P as sl,a as ol,c as nl,B as il,b as X,d as de,e as al,f as dl}from"./vue-3-slider-component-CbaC0ZGR.js";import{_ as ul,D as rl,a as ml}from"./DropdownRadio-BAhia4Xe.js";import{C as pl,_ as fl}from"./CalculatedSummary-BZKp5kui.js";import{_ as Y}from"./plus-icon-lxHPDhbU.js";import{a as xe,_ as ue}from"./note-icon-CfdApiIo.js";import{u as bl,_ as vl}from"./useClientsEditor-DAiIdxQb.js";import{T as re}from"./TableModal-BpXQBRhF.js";import{c as C,o as w}from"./modal-DRTCzFhK.js";import{T as yl,k as gl,O as kl}from"./CustomOpenIndicator-DBeq1Fbz.js";import{B as k}from"./BaseButton-DTRLxGU6.js";import{F as b}from"./FormField-u5Va7GBa.js";import{_ as m}from"./FormSelectField-CkD8ax8O.js";import{_ as N}from"./SecondaryTable-DQ1wqC0o.js";import{_ as Cl}from"./FilterSortDate-D6o0gEk7.js";import{u as Vl}from"./useObjectsEditor-Cjk_tyHx.js";const Se=Ge("payments",{state:()=>({mainTable:{columns:[{formatter:"rowSelection",titleFormatter:"rowSelection",hozAlign:"center",headerSort:!1,width:30},{field:"sum",title:"Сумма",headerSort:!1,formatter:function(r){return`${r.getValue().toLocaleString("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/,/g,".")} ₽`}},{field:"id",title:"№ Сессии",headerSort:!1,width:150},{field:"payment-time",title:"Время оплаты",headerSort:!1},{field:"payment-type",title:"Тип оплаты",headerSort:!1},{field:"check",title:"Чек",headerSort:!1,formatter:function(r){return`
                            <div class="check-cell">
                                <span>${r.getValue()}</span>
                                <button class="check-btn">
                                    <img src="${xe}" />
                                </button>
                            </div>
                        `},cellClick:(r,a)=>{if(r.target.closest(".check-btn")){const p=a.getValue();console.log("Нажали на кнопку чека:",p)}}},{field:"status",title:"Статус",headerSort:!1,width:160,formatter:function(r){const a=r.getValue();return{paid:'<span class="status status-paid">Успешно</span>',refunded:'<span class="status status-canceled">Возвращён</span>',canceled:'<span class="status status-canceled">Отменена</span>'}[a]??a}}],content:[{sum:450,id:1,"payment-time":"15.05.24 12:01:05","payment-type":"Разовый въезд",check:"0012",status:"paid"},{sum:6e4,id:2,"payment-time":"16.05.24 08:53:42","payment-type":"Абонемент",check:"0014",status:"canceled"},{sum:1200,id:3,"payment-time":"17.05.24 14:34:53","payment-type":"ParkPass",check:"0013",status:"refunded"},{sum:700,id:4,"payment-time":"15.05.24 12:01:05","payment-type":"Разовый въезд",check:"0012",status:"paid"},{sum:23e3,id:5,"payment-time":"16.05.24 08:53:42","payment-type":"Абонемент",check:"0014",status:"paid"},{sum:2100,id:6,"payment-time":"17.05.24 14:34:53","payment-type":"ParkPass",check:"0013",status:"refunded"}]},massEditor:{params:[{label:"№ Сессии",value:"session-id"},{label:"Объект",value:"object-name"},{label:"Номер ТС",value:"vehicle-number"},{label:"Время въезда",value:"enter-time"},{label:"Время выезда",value:"exit-time"},{label:"Длительность",value:"duration"},{label:"Сумма",value:"total"},{label:"Статус",value:"status"}]}})});function wl(){return{applyFiltersToColumns:(a,p,V)=>p.map(f=>f.field==="id"?{...f,headerClickPopup(){const y=document.createElement("div");return Ce(ll,{onSelectSortOrder(){V(a,"id")}}).mount(y),y}}:f.field==="payment-time"?{...f,headerClickPopup(){const y=document.createElement("div");return Ce(Cl,{onSelectSortOrder(){V(a,"payment-time")},onSelectCompareState(){V(a,"payment-time")},onSelectDate(){V(a,"payment-time")},onSelectDateRange(){V(a,"payment-time")}}).mount(y),y}}:f)}}function xl(r){const a=Se(),p=v(null),V=v([{name:"edit",label:"Массовое редактирование"}]),f=v(a.massEditor.params),y=Je([{}]);return{massEditorRef:p,massEditorTabs:V,massEditorParams:f,massEditorFields:y,openMassEditor:()=>r.openMassEditor(p),addMassEditorFieldsRow:()=>r.addMassEditorFieldsRow(y)}}function Sl(){const r=v(null),a=v(null),p=Vl(),{objectEditorRef:V}=p,f=bl(),{clientEditorRef:y}=f;return{...p,...f,savePopupRef:r,saveNotifyRef:a,saveConfirmClick:()=>{C(r.value),C(V.value),C(y.value),w(a.value),setTimeout(()=>C(a.value),3e3)}}}function Rl(){const r=Se(),a=tl(),{hasSelection:p,selectedCount:V,selectedRows:f,selectedRowsName:y,changeTableSettings:$,addResetFilterBtn:O}=a,P=v(null),U=Ve(()=>r.mainTable.columns),A=Ve(()=>r.mainTable.content),_=v(null),B=U.value.filter(d=>d.formatter!=="rowSelection").map(d=>({field:d.field,title:d.title})),M=v(null),I=v([{value:"active",title:"Действующий"},{value:"stopped",title:"Приостановлен"},{value:"disabled",title:"Неактивный"},{value:"status-1",title:"Статус 1"},{value:"status-2",title:"Статус 2"}]),{applyFiltersToColumns:h}=wl();r.mainTable.columns=h(P,U.value,O);const D=xl(a),F=v([]),T=v(!1),q=v(null),H=v(null),ee=v(""),L=[{value:"tech-issue",label:"Техническая ошибка"},{value:"payment-issue",label:"Ошибка при оплате"},{value:"another-issue",label:"Другое"}],j=v(!0),z=Sl();const le=()=>a.deselectAll(P),i=()=>a.deleteSelected(P,()=>C(M.value)),te=()=>w(M.value),se=d=>{a.onSelectionChanged(d,"id"),T.value&&Z()},Z=()=>{T.value=!0,F.value=f.value.map(d=>({name:d["payment-type"],average_sum:d.sum,total_sum:d.sum}))};return{paymentsStore:r,mainTableRef:P,tableHeader:U,tableContent:A,tableSettingsHeader:B,hasSelection:p,selectedCount:V,selectedRows:f,selectedRowsName:y,deleteSelectedPopupRef:M,tableSettingsRef:_,statusOptionsList:I,showCalculatedSummary:T,summaryItems:F,paymentDetailsRef:q,refundPopupRef:H,refundType:ee,refundTypeOptions:L,refundConfirmDisabled:j,...D,...z,onSelectionChanged:se,deselectAll:le,calculateSummaryItems:Z,deleteSelected:i,changeTableSettings:$,openDeletePopup:te}}const El={class:"page"},$l={class:"page-content"},Tl={action:"#"},jl=["onClick"],cl={class:"content-inner"},Pl={class:"box"},Ul={class:"row"},Ol={class:"d-flex align-items-center"},Ml={class:"row"},Dl={class:"d-flex align-items-center"},Fl={action:"#"},ql={class:"fields-group"},Hl={class:"field-outer"},Nl={class:"fields-group"},Al={class:"field-outer"},Bl={class:"fields-group"},Il={class:"field-outer"},Ll={class:"field-outer"},zl={class:"fields-group"},Zl={class:"field-outer"},Kl={class:"field-outer"},Gl={class:"fields-group"},Jl={class:"field-outer"},Ql={class:"contact-table-outer"},Wl={class:"pinned-objects"},Xl={class:"name"},Yl={class:"d-flex align-items-center"},_l=["onClick"],hl={class:"d-flex",style:{"margin-top":"20px"}},et={class:"fields-group"},lt={class:"banks"},tt={class:"d-flex justify-content-between align-items-center w-100"},st={class:"settings"},ot={class:"d-flex align-items-end",style:{"margin-top":"10px"}},nt={class:"field"},it={class:"field"},at={class:"field"},dt={class:"history"},ut={class:"fields-group"},rt={class:"field-outer"},mt={class:"field-outer"},pt={class:"field-outer"},ft={class:"email"},bt={class:"d-flex align-items-center flex-wrap"},vt={class:"text"},yt=["onClick"],gt={class:"popup-title"},kt={class:"w-100",style:{margin:"20px 0"}},Ct={class:"row refund-select"},Vt={__name:"Payments",setup(r){const{paymentsStore:a,mainTableRef:p,tableHeader:V,tableContent:f,tableSettingsHeader:y,hasSelection:$,selectedCount:O,selectedRowsName:P,deleteSelectedPopupRef:U,tableSettingsRef:A,statusOptionsList:_,showCalculatedSummary:B,summaryItems:M,massEditorRef:I,massEditorTabs:h,massEditorParams:D,massEditorFields:F,paymentDetailsRef:T,refundPopupRef:q,refundType:H,refundTypeOptions:ee,refundConfirmDisabled:L,objectEditorRef:j,objectContactsTableRef:z,objectEditorTabs:le,objectEditorFields:i,objectEditorTableColumns:te,objectEditorTableContent:se,objectHasEdited:Z,clientEditor:d,clientEditorRef:oe,requisitesTableRef:me,financesHistoryTableRef:Re,docsTableRef:Ee,editorTabs:$e,editorData:x,clientHasEdited:Te,editorContactColumns:je,editorContactContent:ce,editorPinnedObjects:Pe,objectsAllNames:Ue,showSearchObject:pe,editorRequisitesColumns:Oe,editorRequisitesContent:Me,finances:R,financeHistoryColumns:De,financeHistoryContent:Fe,reports:g,editorDocsColumns:qe,editorDocsContent:He,addReportsEmail:fe,pinObject:Ne,unpinObject:Ae,addTableRow:be,savePopupRef:K,deleteSinglePopupRef:G,onSelectionChanged:Be,deselectAll:ne,openDeletePopup:ve,deleteSelected:Ie,saveConfirmClick:ie,openMassEditor:ye,addMassEditorFieldsRow:ge,addModalTableRow:Le,changeTableSettings:ze,calculateSummaryItems:ke}=Rl();return(Ze,e)=>(S(),E(Q,null,[l("main",El,[o(yl,null,{default:n(()=>[o(k,{onClick:e[0]||(e[0]=s=>t(Xe).push("/sessions"))},{default:n(()=>[...e[67]||(e[67]=[u("Сессии",-1)])]),_:1}),o(k,{class:"btn-filled"},{default:n(()=>[...e[68]||(e[68]=[u("Оплаты",-1)])]),_:1})]),_:1}),l("div",$l,[o(sl,null,We({right:n(()=>[o(k,{class:"small-btn",onClick:e[6]||(e[6]=s=>t(w)(t(A)))},{default:n(()=>[...e[74]||(e[74]=[l("img",{src:al},null,-1)])]),_:1}),o(k,{class:"small-btn"},{default:n(()=>[...e[75]||(e[75]=[l("img",{src:dl},null,-1)])]),_:1})]),_:2},[t($)==!0?{name:"left",fn:n(()=>[l("div",{class:"selected-count controller-item",onClick:e[1]||(e[1]=(...s)=>t(ne)&&t(ne)(...s))},[l("span",null,"Выбрано: "+W(t(O)),1),o(k,{class:"btn-filled"},{default:n(()=>[...e[69]||(e[69]=[l("img",{src:el},null,-1)])]),_:1})]),l("div",{class:"delete-row controller-item",onClick:e[2]||(e[2]=(...s)=>t(ve)&&t(ve)(...s))},[...e[70]||(e[70]=[l("img",{src:de},null,-1),u(" Удалить ",-1)])]),l("div",{class:"edit controller-item",onClick:e[3]||(e[3]=(...s)=>t(ye)&&t(ye)(...s))},[...e[71]||(e[71]=[l("img",{src:ul},null,-1),u(" Редактировать ",-1)])]),o(rl,{class:"change-status controller-item","dropdown-list":t(_),onChange:e[4]||(e[4]=s=>console.log("Status changed to: ",s))},{default:n(()=>[...e[72]||(e[72]=[l("img",{src:ml},null,-1),u(" Изменить статус ",-1)])]),_:1},8,["dropdown-list"]),l("div",{class:"summary controller-item",onClick:e[5]||(e[5]=(...s)=>t(ke)&&t(ke)(...s))},[...e[73]||(e[73]=[l("img",{src:fl},null,-1),u(" Сумма ",-1)])])]),key:"0"}:void 0]),1024),t(B)?(S(),we(pl,{key:0,"selected-text":`${t(O)} оплаты`,"title-text":"Данные по выбранным оплатам:",items:t(M),onReset:e[7]||(e[7]=s=>(B.value=!1,t(ne)()))},null,8,["selected-text","items"])):J("",!0),o(ol,{style:{"margin-top":"20px"},columns:t(V),data:t(f),onRowDblclick:e[8]||(e[8]=s=>t(w)(t(T))),onSelectionChanged:t(Be),ref_key:"mainTableRef",ref:p},null,8,["columns","data","onSelectionChanged"])])]),o(nl,{"table-columns":t(y),onChange:e[9]||(e[9]=s=>t(ze)(s,t(a),t(p))),ref_key:"tableSettingsRef",ref:A},null,8,["table-columns"]),o(re,{tabs:t(h),"custom-class":"mass-editor-modal","header-title":"Выбрано: 3",onSaveClick:e[11]||(e[11]=s=>console.log("Changes saved!")),onCloseClick:e[12]||(e[12]=s=>t(C)(t(I))),ref_key:"massEditorRef",ref:I},{edit:n(()=>[l("form",Tl,[e[78]||(e[78]=l("h3",null,"Редактирование выбранных объектов",-1)),e[79]||(e[79]=l("div",{class:"d-flex"},[l("span",{class:"fields-label"},"Параметр"),l("span",{class:"fields-label"},"До изменения"),l("span",{class:"fields-label"},"После изменения")],-1)),(S(!0),E(Q,null,ae(t(F),(s,c)=>(S(),E("div",{class:"fields-row",key:c},[o(m,{options:t(D)},null,8,["options"]),o(m,{options:t(D)},null,8,["options"]),o(m,{options:t(D)},null,8,["options"]),l("button",{type:"button",class:"delete-row",onClick:Ke=>t(F).splice(c,1)},[...e[76]||(e[76]=[l("img",{src:de},null,-1)])],8,jl)]))),128)),l("button",{type:"button",class:"add-fields-btn",onClick:e[10]||(e[10]=(...s)=>t(ge)&&t(ge)(...s))},[...e[77]||(e[77]=[l("img",{src:Y},null,-1),u(" Добавить изменения ",-1)])])])]),_:1},8,["tabs"]),o(il,{"inner-width":"515","custom-class":"payment-details",ref_key:"paymentDetailsRef",ref:T},{header:n(()=>[e[81]||(e[81]=l("h2",{class:"title"},"Детали оплаты, чек №0013",-1)),l("button",{class:"close-btn",onClick:e[13]||(e[13]=s=>t(C)(t(T)))},[...e[80]||(e[80]=[l("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M10.668 10.6667L21.3346 21.3334",stroke:"black","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M21.332 10.6667L10.6654 21.3334",stroke:"black","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])]),body:n(()=>[l("div",cl,[e[95]||(e[95]=l("div",{class:"top-box"},[l("p",null,[l("b",null,"60 000 ₽, 6.05.24, 08:15:05")])],-1)),l("div",Pl,[e[88]||(e[88]=l("div",{class:"row"},[l("p",null,"Сумма"),l("div",{class:"d-flex align-items-center"},[l("p",null,[l("b",null,"60 000 ₽")]),l("button",{class:"icon copy-icon"},[l("img",{src:xe})])])],-1)),e[89]||(e[89]=l("div",{class:"row row-error"},[l("p",null,"Дата и время"),l("div",{class:"d-flex align-items-center"},[l("p",null,[l("b",null,"15.05.24, 12:01:05")])])],-1)),e[90]||(e[90]=l("div",{class:"row"},[l("p",null,"№ сессии"),l("p",null,[l("b",null,"1665423547316996")])],-1)),e[91]||(e[91]=l("div",{class:"row"},[l("p",null,"Тип оплаты"),l("p",null,[l("b",null,"Разовый въезд")])],-1)),e[92]||(e[92]=l("div",{class:"row"},[l("p",null,"Статус"),l("p",null,[l("b",null,"Успешно")])],-1)),l("div",Ul,[e[84]||(e[84]=l("p",null,"Объект",-1)),l("div",Ol,[e[83]||(e[83]=l("p",null,[l("b",null,"ТЦ “Ромашка”")],-1)),l("button",{class:"icon link-icon",onClick:e[14]||(e[14]=s=>t(w)(t(j)))},[...e[82]||(e[82]=[l("img",{src:ue},null,-1)])])])]),l("div",Ml,[e[87]||(e[87]=l("p",null,"Клиент",-1)),l("div",Dl,[e[86]||(e[86]=l("p",null,[l("b",null,"ООО “Шишмаойл”")],-1)),l("button",{class:"icon link-icon",onClick:e[15]||(e[15]=s=>t(w)(t(oe)))},[...e[85]||(e[85]=[l("img",{src:ue},null,-1)])])])]),e[93]||(e[93]=l("div",{class:"row"},[l("p",null,"ID пользователя"),l("div",{class:"d-flex align-items-center"},[l("p",null,[l("b",null,"09087754")]),l("button",{class:"icon link-icon"},[l("img",{src:ue})])])],-1))]),o(k,{class:"refund-btn btn-filled",onClick:e[16]||(e[16]=s=>t(w)(t(q)))},{default:n(()=>[...e[94]||(e[94]=[u(" Оформить возврат ",-1)])]),_:1})])]),_:1},512),o(re,{"header-title":"Парковочный объект: “ТЦ Ромашка”",tabs:t(le),"inner-width":870,"close-on-overlay-click":!1,"disabled-save-btn":!t(Z),onOverlayClick:e[30]||(e[30]=s=>t(w)(t(K))),onSaveClick:t(ie),onCloseClick:e[31]||(e[31]=s=>t(C)(t(j))),ref_key:"objectEditorRef",ref:j},{data:n(()=>[l("form",Fl,[e[102]||(e[102]=l("h3",null,"Данные о компании",-1)),l("div",ql,[o(b,{items:t(i).clients,name:"client",modelValue:t(i).client,"onUpdate:modelValue":e[17]||(e[17]=s=>t(i).client=s),label:"Клиент"},null,8,["items","modelValue"]),o(b,{name:"object",modelValue:t(i).object,"onUpdate:modelValue":e[18]||(e[18]=s=>t(i).object=s),label:"Объект"},null,8,["modelValue"]),l("div",Hl,[e[96]||(e[96]=l("label",null,"Статус",-1)),o(m,{modelValue:t(i).status,"onUpdate:modelValue":e[19]||(e[19]=s=>t(i).status=s),options:t(i).statusOptions},null,8,["modelValue","options"])]),o(b,{name:"domain",modelValue:t(i).domain,"onUpdate:modelValue":e[20]||(e[20]=s=>t(i).domain=s),label:"Домен объекта"},null,8,["modelValue"])]),l("div",Nl,[l("div",Al,[e[97]||(e[97]=l("label",null,[u("Фиск. "),l("br"),u(" сервис")],-1)),o(m,{modelValue:t(i).fiscalService,"onUpdate:modelValue":e[21]||(e[21]=s=>t(i).fiscalService=s),options:t(i).fiscalServices,name:"fiscal-service"},null,8,["modelValue","options"])]),o(b,{name:"check-email",modelValue:t(i).checkEmail,"onUpdate:modelValue":e[22]||(e[22]=s=>t(i).checkEmail=s),label:"E-mail <br> для чеков"},null,8,["modelValue"])]),l("div",Bl,[l("div",Il,[e[98]||(e[98]=l("label",null,"Страна",-1)),o(m,{modelValue:t(i).country,"onUpdate:modelValue":e[23]||(e[23]=s=>t(i).country=s),options:t(i).countries,name:"country"},null,8,["modelValue","options"])]),o(b,{name:"address",modelValue:t(i).address,"onUpdate:modelValue":e[24]||(e[24]=s=>t(i).address=s),label:"Адрес"},null,8,["modelValue"]),l("div",Ll,[e[99]||(e[99]=l("label",null,"Час. пояс",-1)),o(m,{modelValue:t(i).timeZone,"onUpdate:modelValue":e[25]||(e[25]=s=>t(i).timeZone=s),options:t(i).timeZones,name:"timezone"},null,8,["modelValue","options"])])]),l("div",zl,[l("div",Zl,[e[100]||(e[100]=l("label",null,"Валюта",-1)),o(m,{modelValue:t(i).currency,"onUpdate:modelValue":e[26]||(e[26]=s=>t(i).currency=s),options:t(i).currencies,name:"currency"},null,8,["modelValue","options"])]),l("div",Kl,[e[101]||(e[101]=l("label",null,"Язык",-1)),o(m,{modelValue:t(i).lang,"onUpdate:modelValue":e[27]||(e[27]=s=>t(i).lang=s),options:t(i).langs,name:"lang"},null,8,["modelValue","options"])])])])]),contact:n(()=>[e[104]||(e[104]=l("h3",null,"Контактные лица",-1)),o(N,{style:{"margin-top":"20px"},columns:t(te),data:t(se),ref_key:"objectContactsTableRef",ref:z},null,8,["columns","data"]),o(k,{style:{"margin-top":"20px"},onClick:e[28]||(e[28]=s=>t(Le)(t(z)))},{default:n(()=>[...e[103]||(e[103]=[u("Добавить",-1)])]),_:1})]),"sidebar-bottom":n(()=>[o(k,{class:"remove-object-btn",onClick:e[29]||(e[29]=s=>t(w)(t(G)))},{default:n(()=>[...e[105]||(e[105]=[l("img",{src:de},null,-1),u(" Удалить объект ",-1)])]),_:1})]),_:1},8,["tabs","disabled-save-btn","onSaveClick"]),o(re,{"custom-class":"client-editor","header-title":"Парковочный объект: “ТЦ Ромашка”",tabs:t($e),"inner-width":870,"close-on-overlay-click":!1,"disabled-save-btn":!t(Te),onOverlayClick:e[57]||(e[57]=s=>t(w)(t(K))),onSaveClick:t(ie),onCloseClick:e[58]||(e[58]=s=>t(C)(t(oe))),ref_key:"clientEditorRef",ref:oe},{data:n(()=>[e[107]||(e[107]=l("h3",{style:{"margin-bottom":"30px"}},"Данные о компании",-1)),l("div",Gl,[o(b,{name:"name",modelValue:t(x).name,"onUpdate:modelValue":e[32]||(e[32]=s=>t(x).name=s),label:"Название"},null,8,["modelValue"]),o(b,{name:"phone",modelValue:t(x).phone,"onUpdate:modelValue":e[33]||(e[33]=s=>t(x).phone=s),label:"Телефон"},null,8,["modelValue"]),o(b,{name:"email",modelValue:t(x).email,"onUpdate:modelValue":e[34]||(e[34]=s=>t(x).email=s),label:"E-mail"},null,8,["modelValue"]),o(b,{name:"address",modelValue:t(x).address,"onUpdate:modelValue":e[35]||(e[35]=s=>t(x).address=s),label:"Адрес"},null,8,["modelValue"]),l("div",Jl,[e[106]||(e[106]=l("label",null,[u("Статус "),l("br"),u(" клиента")],-1)),o(m,{modelValue:t(x).status,"onUpdate:modelValue":e[36]||(e[36]=s=>t(x).status=s),options:t(x).statusOptions,name:"client-status"},null,8,["modelValue","options"])])])]),contacts:n(()=>[e[110]||(e[110]=l("h3",{style:{"margin-bottom":"30px"}},"Контактные лица",-1)),l("div",Ql,[o(N,{style:{"margin-top":"20px"},columns:t(je),data:t(ce),id:"client-contact-table",ref:"contactsTableRef"},null,8,["columns","data"]),e[108]||(e[108]=l("div",{class:"comment-popup"},[l("input",{type:"text",placeholder:"Ваш комментарий"})],-1))]),o(k,{class:"btn-filled",onClick:e[37]||(e[37]=s=>t(be)(Ze.contactsTableRef)),style:{"margin-top":"20px"}},{default:n(()=>[...e[109]||(e[109]=[u(" Добавить новый контакт ",-1)])]),_:1})]),"pinned-objects":n(()=>[e[115]||(e[115]=l("h3",{style:{"margin-bottom":"30px"}},"Объекты ООО “ШишмаОйл”",-1)),l("div",Wl,[l("ul",null,[(S(!0),E(Q,null,ae(t(Pe),s=>(S(),E("li",{key:s.id},[l("span",Xl,W(s.name),1),l("div",Yl,[l("button",{class:"unpin-btn",onClick:c=>t(Ae)(s.id)},[...e[111]||(e[111]=[l("img",{src:vl},null,-1)])],8,_l),l("button",{class:"open-btn",onClick:e[38]||(e[38]=c=>t(w)(t(j)))},[...e[112]||(e[112]=[l("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M6.5 0.5H2.5C1.39543 0.5 0.5 1.39543 0.5 2.5V12.5C0.5 13.6046 1.39543 14.5 2.5 14.5H12.5C13.6046 14.5 14.5 13.6046 14.5 12.5V7.75M14.5 0.5H10.5M14.5 0.5V4.5M14.5 0.5L4.5 10.5",stroke:"#343434","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])])]))),128))]),t(pe)?(S(),we(b,{key:0,name:"search-object",modelValue:t(d).searchObject,"onUpdate:modelValue":e[39]||(e[39]=s=>t(d).searchObject=s),label:"Объект",items:t(Ue),style:{"margin-top":"20px"},onSelect:t(Ne)},null,8,["modelValue","items","onSelect"])):J("",!0),l("div",hl,[o(k,{class:"btn-filled pin-btn",onClick:e[40]||(e[40]=s=>pe.value=!0)},{default:n(()=>[...e[113]||(e[113]=[u(" Прикрепить объект ",-1)])]),_:1}),o(k,{class:"add-btn",onClick:e[41]||(e[41]=s=>t(w)(t(j)))},{default:n(()=>[...e[114]||(e[114]=[l("img",{src:Y},null,-1),u(" Добавить объект ",-1)])]),_:1})])])]),requisites:n(()=>[e[118]||(e[118]=l("h3",{style:{"margin-bottom":"30px"}},"Реквизиты юр.лица",-1)),l("div",et,[o(b,{modelValue:t(d).requisites.billingName,"onUpdate:modelValue":e[42]||(e[42]=s=>t(d).requisites.billingName=s),label:"Наименование юр.лица","label-width":"120"},null,8,["modelValue"]),o(b,{modelValue:t(d).requisites.ceoName,"onUpdate:modelValue":e[43]||(e[43]=s=>t(d).requisites.ceoName=s),label:"ФИО ген. директора","label-width":"120"},null,8,["modelValue"]),o(b,{modelValue:t(d).requisites.billingAddress,"onUpdate:modelValue":e[44]||(e[44]=s=>t(d).requisites.billingAddress=s),label:"Юр.адрес","label-width":"120"},null,8,["modelValue"]),o(b,{modelValue:t(d).requisites.inn,"onUpdate:modelValue":e[45]||(e[45]=s=>t(d).requisites.inn=s),label:"ИНН","label-width":"120"},null,8,["modelValue"]),o(b,{modelValue:t(d).requisites.kpp,"onUpdate:modelValue":e[46]||(e[46]=s=>t(d).requisites.kpp=s),label:"КПП","label-width":"120"},null,8,["modelValue"])]),l("div",lt,[l("div",tt,[e[117]||(e[117]=l("h3",null,"Банковские счета",-1)),o(k,{class:"btn-filled add-bank-btn",onClick:e[47]||(e[47]=s=>t(be)(t(me)))},{default:n(()=>[...e[116]||(e[116]=[l("img",{src:Y},null,-1),u(" Добавить счёт ",-1)])]),_:1})]),o(N,{style:{"margin-top":"20px"},columns:t(Oe),data:t(Me),ref_key:"requisitesTableRef",ref:me},null,8,["columns","data"])])]),finances:n(()=>[e[127]||(e[127]=l("div",{class:"conditions"},[l("h3",{style:{"margin-bottom":"20px"}},"Условия"),l("div",{class:"row"},[l("span",{class:"text"},"Тип комиссии"),l("span",{class:"text"},[l("b",null,"Процент от оборота")])]),l("div",{class:"row"},[l("span",{class:"text"},"Ставка"),l("span",{class:"text"},[l("b",null,"15%")])])],-1)),l("div",st,[e[123]||(e[123]=l("h3",{style:{"margin-bottom":"25px"}},"Настройки",-1)),e[124]||(e[124]=l("p",{class:"text"},"Выплачивать каждые:",-1)),l("div",ot,[l("div",nt,[e[119]||(e[119]=l("span",{class:"label"},"Интервал",-1)),o(m,{modelValue:t(R).interval,"onUpdate:modelValue":e[48]||(e[48]=s=>t(R).interval=s),options:t(R).intervalOptions,width:"45"},null,8,["modelValue","options"])]),l("div",it,[e[120]||(e[120]=l("span",{class:"label"},"Период",-1)),o(m,{modelValue:t(R).period,"onUpdate:modelValue":e[49]||(e[49]=s=>t(R).period=s),options:t(R).periodOptions,width:"80"},null,8,["modelValue","options"])]),l("div",at,[e[121]||(e[121]=l("span",{class:"label"},"Число",-1)),o(m,{modelValue:t(R).number,"onUpdate:modelValue":e[50]||(e[50]=s=>t(R).number=s),options:t(R).numberOptions,width:"60"},null,8,["modelValue","options"])]),o(k,{class:"btn-filled settings-btn"},{default:n(()=>[...e[122]||(e[122]=[u("Применить",-1)])]),_:1})]),e[125]||(e[125]=l("div",{style:{"margin-top":"15px"}},[l("p",{class:"text"},"Текущее расписание: "),l("p",{class:"text",style:{"margin-top":"10px"}},[l("b",null,"Выплата каждые 1 месяц 5-го числа ")])],-1))]),l("div",dt,[e[126]||(e[126]=l("h3",{style:{"margin-bottom":"30px"}},"История выплат",-1)),o(N,{style:{"margin-top":"20px"},columns:t(De),data:t(Fe),ref_key:"financesHistoryTableRef",ref:Re},null,8,["columns","data"])])]),reports:n(()=>[e[134]||(e[134]=l("h3",{style:{"margin-bottom":"30px"}},"Отчёты",-1)),l("div",ut,[l("div",rt,[e[128]||(e[128]=l("label",{class:"reports-label"},"Тип отчёта",-1)),o(m,{modelValue:t(g).type,"onUpdate:modelValue":e[51]||(e[51]=s=>t(g).type=s),options:t(g).typeOptions,name:"reports-type"},null,8,["modelValue","options"])]),l("div",mt,[e[129]||(e[129]=l("label",{class:"reports-label"},"Период",-1)),o(m,{modelValue:t(g).period,"onUpdate:modelValue":e[52]||(e[52]=s=>t(g).period=s),options:t(g).periodOptions,name:"reports-period"},null,8,["modelValue","options"])]),l("div",pt,[e[130]||(e[130]=l("label",{class:"reports-label"},"Объекты",-1)),o(m,{modelValue:t(g).objects,"onUpdate:modelValue":e[53]||(e[53]=s=>t(g).objects=s),options:t(g).objectsOptions,name:"reports-objects"},null,8,["modelValue","options"])])]),l("div",ft,[e[133]||(e[133]=l("h4",null,"E-mail для отправки отчёта:",-1)),l("div",bt,[(S(!0),E(Q,null,ae(t(g).emailsToSend,(s,c)=>(S(),E("div",{class:"email-item",key:c},[l("span",vt,W(s),1),l("button",{class:"remove-btn",onClick:Ke=>t(g).emailsToSend.splice(c,1)},[...e[131]||(e[131]=[l("span",null,null,-1),l("span",null,null,-1)])],8,yt)]))),128)),t(g).showEmailField?(S(),E("input",{key:0,type:"email",class:"email-field",placeholder:"email@example",onKeydown:e[54]||(e[54]=Ye(_e(s=>t(fe)(s.target.value),["prevent"]),["enter"])),onChange:e[55]||(e[55]=s=>t(fe)(s.target.value))},null,32)):J("",!0),t(g).showEmailField?J("",!0):(S(),E("button",{key:1,class:"add-btn",onClick:e[56]||(e[56]=s=>t(g).showEmailField=!0)},[...e[132]||(e[132]=[l("img",{src:Y},null,-1),u(" Добавить ",-1)])]))])])]),docs:n(()=>[e[136]||(e[136]=l("h3",null,"Договоры и акты",-1)),o(N,{style:{"margin-top":"30px"},columns:t(qe),data:t(He),ref_key:"docsTableRef",ref:Ee},null,8,["columns","data"]),o(k,{class:"btn-filled",style:{"margin-top":"30px"}},{default:n(()=>[...e[135]||(e[135]=[u("Загрузить новый документ",-1)])]),_:1})]),_:1},8,["tabs","disabled-save-btn","onSaveClick"]),o(X,{ref_key:"deleteSelectedPopupRef",ref:U,"confirm-style":"red","confirm-text":"Удалить","cancel-text":"Отменить",onConfirm:t(Ie),onCancel:e[59]||(e[59]=s=>t(C)(t(U)))},{default:n(()=>[l("h2",gt,[e[137]||(e[137]=u(" Удалить сессии? ",-1)),e[138]||(e[138]=l("br",null,null,-1)),u(" "+W(t(P)),1)])]),_:1},8,["onConfirm"]),o(X,{ref_key:"refundPopupRef",ref:q,"custom-class":"refund-payment-popup","confirm-text":"Подтвердить возврат","cancel-text":"Отмена","disabled-confirm-btn":t(L),onCancel:e[62]||(e[62]=s=>t(C)(t(q))),onConfirm:e[63]||(e[63]=s=>console.log("Возврат подтвержден"))},{default:n(()=>[e[140]||(e[140]=l("h2",{class:"popup-title"},"Возврат денежных средств",-1)),e[141]||(e[141]=l("div",{class:"row"},[l("p",null,"Сумма к возврату"),l("p",null,[l("b",null,"450 ₽")])],-1)),e[142]||(e[142]=l("div",{class:"row"},[l("p",null,"Номер чека"),l("p",null,[l("b",null,"12345")])],-1)),l("div",kt,[l("div",Ct,[e[139]||(e[139]=l("p",null,"Причина возврата",-1)),o(t(gl),{modelValue:t(H),"onUpdate:modelValue":[e[60]||(e[60]=s=>he(H)?H.value=s:null),e[61]||(e[61]=s=>L.value=!1)],placeholder:"Выберите из списка",options:t(ee),clearable:!1,searchable:!1,components:{OpenIndicator:kl}},null,8,["modelValue","options","components"])])]),e[143]||(e[143]=l("div",{class:"comment"},[l("label",{for:"refund-comment"},"Комментарий:"),l("textarea",{name:"refund-comment",id:"refund-comment"})],-1))]),_:1},8,["disabled-confirm-btn"]),o(X,{ref_key:"savePopupRef",ref:K,"confirm-text":"Сохранить","cancel-text":"Не сохранять",onCancel:e[64]||(e[64]=s=>t(C)(t(K))),onConfirm:t(ie)},{default:n(()=>[...e[144]||(e[144]=[l("h2",{class:"popup-title"},"Сохранить перед выходом?",-1),l("p",{class:"popup-text"},"Без сохранения все изменения будут потеряны!",-1)])]),_:1},8,["onConfirm"]),o(X,{ref_key:"deleteSinglePopupRef",ref:G,"confirm-style":"red","confirm-text":"Удалить","cancel-text":"Отменить",onConfirm:e[65]||(e[65]=s=>t(C)(t(G))),onCancel:e[66]||(e[66]=s=>t(C)(t(G)))},{default:n(()=>[...e[145]||(e[145]=[l("h2",{class:"popup-title"}," Удалить объект? ",-1)])]),_:1},512)],64))}},Nt=Qe(Vt,[["__scopeId","data-v-53dbbff9"]]);export{Nt as default};
