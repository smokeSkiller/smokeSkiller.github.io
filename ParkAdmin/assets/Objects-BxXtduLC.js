import{T as al,P as dl,b as rl,c as y,d as ml,e as ul,f as V,g as pl,h as fl}from"./FilterSortDate-B4cyY346.js";import{T as M,_ as bl,D as vl,a as gl,c as O,b as d}from"./DropdownRadio-tfhpAv1J.js";import{C as Cl,_ as kl}from"./CalculatedSummary-SSh6D1uP.js";import{B as yl,_ as Vl}from"./BottomNotify-BfBueHf7.js";import{B as r}from"./BaseButton-C8-CVVQ8.js";import{u as Sl,_ as Rl,F as m}from"./useObjects-C7Yq5ZLB.js";import{o as u,c as v}from"./modal-DRTCzFhK.js";import{_ as $l,c as S,a as t,b as s,w as i,g as D,z as H,u as e,A as El,F as I,o as p,d as a,t as Z,j as xl}from"./index-CkweRrl9.js";const Tl={class:"page"},jl={class:"page-content"},wl={action:"#"},Ul={class:"fields-group"},Pl={class:"field-outer"},Bl={class:"fields-group"},Fl={class:"field-outer"},Nl={class:"fields-group"},Ml={class:"field-outer"},Ol={class:"field-outer"},Dl={class:"fields-group"},Hl={class:"field-outer"},Il={class:"field-outer"},Zl={action:"#"},zl=["onClick"],Al={class:"popup-title"},Ll={__name:"Objects",setup(ql){const{objectsStore:z,mainTableRef:R,tableHeader:A,tableContent:L,tableSettingsHeader:q,hasSelection:G,selectedCount:$,selectedRowsName:J,deleteSelectedPopupRef:E,deleteSinglePopupRef:f,savePopupRef:x,saveNotifyRef:K,tableSettingsRef:T,statusOptionsList:Q,showCalculatedSummary:g,summaryItems:W,massEditorRef:X,massEditorTabs:Y,massEditorParams:C,massEditorFields:j,objectEditorRef:b,contactsTableRef:c,objectEditorTabs:_,objectEditorFields:n,objectEditorTableColumns:h,objectEditorTableContent:ll,objectHasEdited:el,onSelectionChanged:tl,deselectAll:k,openDeletePopup:w,deleteSelected:ol,saveConfirmClick:U,cancelSaveClick:sl,openMassEditor:P,addModalTableRow:nl,addMassEditorFieldsRow:B,changeTableSettings:il,calculateSummaryItems:F}=Sl();return(Gl,l)=>(p(),S(I,null,[t("main",Tl,[s(al,null,{default:i(()=>[s(r,{class:"btn-filled"},{default:i(()=>[...l[29]||(l[29]=[a("Объекты",-1)])]),_:1})]),_:1}),t("div",jl,[e(g)?H("",!0):(p(),D(dl,{key:0},El({right:i(()=>[s(r,{class:"btn-filled add-element-btn",onClick:l[5]||(l[5]=o=>e(u)(e(b)))},{default:i(()=>[...l[35]||(l[35]=[t("img",{src:O},null,-1),a(" Добавить новый объект ",-1)])]),_:1}),s(r,{class:"small-btn",onClick:l[6]||(l[6]=o=>e(u)(e(T)))},{default:i(()=>[...l[36]||(l[36]=[t("img",{src:pl},null,-1)])]),_:1}),s(r,{class:"small-btn"},{default:i(()=>[...l[37]||(l[37]=[t("img",{src:fl},null,-1)])]),_:1})]),_:2},[e(G)==!0?{name:"left",fn:i(()=>[t("div",{class:"selected-count controller-item",onClick:l[0]||(l[0]=(...o)=>e(k)&&e(k)(...o))},[t("span",null,"Выбрано: "+Z(e($)),1),s(r,{class:"btn-filled"},{default:i(()=>[...l[30]||(l[30]=[t("img",{src:ul},null,-1)])]),_:1})]),t("div",{class:"delete-row controller-item",onClick:l[1]||(l[1]=(...o)=>e(w)&&e(w)(...o))},[...l[31]||(l[31]=[t("img",{src:V},null,-1),a(" Удалить ",-1)])]),t("div",{class:"edit controller-item",onClick:l[2]||(l[2]=(...o)=>e(P)&&e(P)(...o))},[...l[32]||(l[32]=[t("img",{src:bl},null,-1),a(" Редактировать ",-1)])]),s(vl,{class:"change-status controller-item","dropdown-list":e(Q),onChange:l[3]||(l[3]=o=>console.log("Status changed to: ",o))},{default:i(()=>[...l[33]||(l[33]=[t("img",{src:gl},null,-1),a(" Изменить статус ",-1)])]),_:1},8,["dropdown-list"]),t("div",{class:"summary controller-item",onClick:l[4]||(l[4]=(...o)=>e(F)&&e(F)(...o))},[...l[34]||(l[34]=[t("img",{src:kl},null,-1),a(" Сумма ",-1)])])]),key:"0"}:void 0]),1024)),e(g)?(p(),D(Cl,{key:1,"selected-text":`${e($)} объектов`,items:e(W),onReset:l[7]||(l[7]=o=>(g.value=!1,e(k)()))},null,8,["selected-text","items"])):H("",!0),s(rl,{style:{"margin-top":"20px"},data:e(L),columns:e(A),onRowDblclick:l[8]||(l[8]=o=>e(u)(e(b))),onSelectionChanged:e(tl),ref_key:"mainTableRef",ref:R},null,8,["data","columns","onSelectionChanged"])])]),s(M,{"header-title":"Парковочный объект: “ТЦ Ромашка”",tabs:e(_),"inner-width":870,"close-on-overlay-click":!1,"disabled-save-btn":!e(el),onOverlayClick:l[21]||(l[21]=o=>e(u)(e(x))),onSaveClick:e(U),onCloseClick:l[22]||(l[22]=o=>e(v)(e(b))),ref_key:"objectEditorRef",ref:b},{data:i(()=>[t("form",wl,[l[44]||(l[44]=t("h3",null,"Данные о компании",-1)),t("div",Ul,[s(m,{items:e(n).clients,name:"client",modelValue:e(n).client,"onUpdate:modelValue":l[9]||(l[9]=o=>e(n).client=o),label:"Клиент"},null,8,["items","modelValue"]),s(m,{name:"object",modelValue:e(n).object,"onUpdate:modelValue":l[10]||(l[10]=o=>e(n).object=o),label:"Объект"},null,8,["modelValue"]),t("div",Pl,[l[38]||(l[38]=t("label",null,"Статус",-1)),s(d,{modelValue:e(n).status,"onUpdate:modelValue":l[11]||(l[11]=o=>e(n).status=o),options:e(n).statusOptions},null,8,["modelValue","options"])]),s(m,{name:"domain",modelValue:e(n).domain,"onUpdate:modelValue":l[12]||(l[12]=o=>e(n).domain=o),label:"Домен объекта"},null,8,["modelValue"])]),t("div",Bl,[t("div",Fl,[l[39]||(l[39]=t("label",null,[a("Фиск. "),t("br"),a(" сервис")],-1)),s(d,{modelValue:e(n).fiscalService,"onUpdate:modelValue":l[13]||(l[13]=o=>e(n).fiscalService=o),options:e(n).fiscalServices,name:"fiscal-service"},null,8,["modelValue","options"])]),s(m,{name:"check-email",modelValue:e(n).checkEmail,"onUpdate:modelValue":l[14]||(l[14]=o=>e(n).checkEmail=o),label:"E-mail <br> для чеков"},null,8,["modelValue"])]),t("div",Nl,[t("div",Ml,[l[40]||(l[40]=t("label",null,"Страна",-1)),s(d,{modelValue:e(n).country,"onUpdate:modelValue":l[15]||(l[15]=o=>e(n).country=o),options:e(n).countries,name:"country"},null,8,["modelValue","options"])]),s(m,{name:"address",modelValue:e(n).address,"onUpdate:modelValue":l[16]||(l[16]=o=>e(n).address=o),label:"Адрес"},null,8,["modelValue"]),t("div",Ol,[l[41]||(l[41]=t("label",null,"Час. пояс",-1)),s(d,{modelValue:e(n).timeZone,"onUpdate:modelValue":l[17]||(l[17]=o=>e(n).timeZone=o),options:e(n).timeZones,name:"timezone"},null,8,["modelValue","options"])])]),t("div",Dl,[t("div",Hl,[l[42]||(l[42]=t("label",null,"Валюта",-1)),s(d,{modelValue:e(n).currency,"onUpdate:modelValue":l[18]||(l[18]=o=>e(n).currency=o),options:e(n).currencies,name:"currency"},null,8,["modelValue","options"])]),t("div",Il,[l[43]||(l[43]=t("label",null,"Язык",-1)),s(d,{modelValue:e(n).lang,"onUpdate:modelValue":l[19]||(l[19]=o=>e(n).lang=o),options:e(n).langs,name:"lang"},null,8,["modelValue","options"])])])])]),contact:i(()=>[l[46]||(l[46]=t("h3",null,"Контактные лица",-1)),s(Rl,{style:{"margin-top":"20px"},columns:e(h),data:e(ll),ref_key:"contactsTableRef",ref:c},null,8,["columns","data"]),s(r,{style:{"margin-top":"20px"},onClick:e(nl)},{default:i(()=>[...l[45]||(l[45]=[a("Добавить",-1)])]),_:1},8,["onClick"])]),"sidebar-bottom":i(()=>[s(r,{class:"remove-object-btn",onClick:l[20]||(l[20]=o=>e(u)(e(f)))},{default:i(()=>[...l[47]||(l[47]=[t("img",{src:V},null,-1),a(" Удалить объект ",-1)])]),_:1})]),_:1},8,["tabs","disabled-save-btn","onSaveClick"]),s(y,{ref_key:"savePopupRef",ref:x,"confirm-text":"Сохранить","cancel-text":"Не сохранять",onCancel:e(sl),onConfirm:e(U)},{default:i(()=>[...l[48]||(l[48]=[t("h2",{class:"popup-title"},"Сохранить перед выходом?",-1),t("p",{class:"popup-text"},"Без сохранения все изменения будут потеряны!",-1)])]),_:1},8,["onCancel","onConfirm"]),s(y,{ref_key:"deleteSinglePopupRef",ref:f,"confirm-style":"red","confirm-text":"Удалить","cancel-text":"Отменить",onConfirm:l[23]||(l[23]=o=>e(v)(e(f))),onCancel:l[24]||(l[24]=o=>e(v)(e(f)))},{default:i(()=>[...l[49]||(l[49]=[t("h2",{class:"popup-title"}," Удалить объект? ",-1)])]),_:1},512),s(yl,{ref_key:"saveNotifyRef",ref:K},{default:i(()=>[...l[50]||(l[50]=[t("img",{src:Vl},null,-1),t("span",null,"Изменения сохранены",-1)])]),_:1},512),s(M,{tabs:e(Y),"custom-class":"mass-editor-modal","header-title":"Выбрано: 3",onSaveClick:l[26]||(l[26]=o=>console.log("Changes saved!")),ref_key:"massEditorRef",ref:X},{edit:i(()=>[t("form",Zl,[l[53]||(l[53]=t("h3",null,"Редактирование выбранных объектов",-1)),l[54]||(l[54]=t("div",{class:"d-flex"},[t("span",{class:"fields-label"},"Параметр"),t("span",{class:"fields-label"},"До изменения"),t("span",{class:"fields-label"},"После изменения")],-1)),(p(!0),S(I,null,xl(e(j),(o,N)=>(p(),S("div",{class:"fields-row",key:N},[s(d,{options:e(C)},null,8,["options"]),s(d,{options:e(C)},null,8,["options"]),s(d,{options:e(C)},null,8,["options"]),t("button",{type:"button",class:"delete-row",onClick:Jl=>e(j).splice(N,1)},[...l[51]||(l[51]=[t("img",{src:V},null,-1)])],8,zl)]))),128)),t("button",{type:"button",class:"add-fields-btn",onClick:l[25]||(l[25]=(...o)=>e(B)&&e(B)(...o))},[...l[52]||(l[52]=[t("img",{src:O},null,-1),a(" Добавить изменения ",-1)])])])]),_:1},8,["tabs"]),s(ml,{"table-columns":e(q),onChange:l[27]||(l[27]=o=>e(il)(o,e(z),e(R))),ref_key:"tableSettingsRef",ref:T},null,8,["table-columns"]),s(y,{ref_key:"deleteSelectedPopupRef",ref:E,"confirm-style":"red","confirm-text":"Удалить","cancel-text":"Отменить",onConfirm:e(ol),onCancel:l[28]||(l[28]=o=>e(v)(e(E)))},{default:i(()=>[t("h2",Al,[l[55]||(l[55]=a(" Удалить объекты ",-1)),l[56]||(l[56]=t("br",null,null,-1)),a(" "+Z(e(J)),1)])]),_:1},8,["onConfirm"])],64))}},le=$l(Ll,[["__scopeId","data-v-845d37c6"]]);export{le as default};
