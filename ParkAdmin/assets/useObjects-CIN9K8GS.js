import{o as x,c as D}from"./modal-DRTCzFhK.js";import{a as g,u as I}from"./useObjectsEditor-Cjk_tyHx.js";import{_ as E,u as T}from"./vue-3-slider-component-CbaC0ZGR.js";import{x as i,e as a,y as F,i as b}from"./index-B567c83m.js";import{_ as H}from"./FilterSortSearch-Bj1mziqT.js";import{_ as $}from"./FilterSortDate-D6o0gEk7.js";function L(){return{applyFiltersToColumns:(e,c,s)=>c.map(o=>o.field==="name"?{...o,headerClickPopup(){const t=document.createElement("div");return i(E,{onSelectSortOrder(){s(e,"name")}}).mount(t),t}}:o.field==="geopos"?{...o,headerClickPopup(){const t=document.createElement("div");return i(E,{onSelectSortOrder(){s(e,"geopos")}}).mount(t),t}}:o.field==="country"?{...o,headerClickPopup(){const t=document.createElement("div");return i($,{onSelectSortOrder(){s(e,"country")},onSelectCompareState(){s(e,"country")},onSelectDate(){s(e,"country")},onSelectDateRange(){s(e,"country")}}).mount(t),t}}:o.field==="city"?{...o,headerClickPopup(){const t=document.createElement("div");return i(H,{onSelectSortOrder(){s(e,"city")},dropdownItems:[{name:"Пенза"},{name:"Мосва"},{name:"Самара"},{name:"Екатеринбург"},{name:"Кемерово"}],onSelectCheckbox(){s(e,"city")}}).mount(t),t}}:o)}}function N(r){const e=g(),c=a(null),s=a([{name:"edit",label:"Массовое редактирование"}]),o=a(e.massEditor.params),t=F([{}]);return{massEditorRef:c,massEditorTabs:s,massEditorParams:o,massEditorFields:t,openMassEditor:()=>r.openMassEditor(c),addMassEditorFieldsRow:()=>r.addMassEditorFieldsRow(t)}}function U(){const r=g(),e=T(),{hasSelection:c,selectedCount:s,selectedRows:o,selectedRowsName:t,changeTableSettings:l,addResetFilterBtn:S}=e,u=a(null),m=b(()=>r.mainTable.columns),y=b(()=>r.mainTable.content),_=a(null),C=m.value.filter(n=>n.formatter!=="rowSelection").map(n=>({field:n.field,title:n.title})),p=a(null),h=a([{value:"active",title:"Действующий"},{value:"stopped",title:"Приостановлен"},{value:"disabled",title:"Неактивный"},{value:"status-1",title:"Статус 1"},{value:"status-2",title:"Статус 2"}]),{applyFiltersToColumns:O}=L();r.mainTable.columns=O(u,m.value,S);const M=I(),j=N(e),f=a([]),d=a(!1),w=()=>e.deselectAll(u),P=()=>e.deleteSelected(u,()=>D(p.value)),k=()=>x(p.value),A=n=>{e.onSelectionChanged(n,"name"),d.value&&v()},v=()=>{d.value=!0,f.value=o.value.map(n=>({name:n.name,average_length:n.average_length,average_sum:n.average_sum,total_sum:n.total_sum}))};return{objectsStore:r,mainTableRef:u,tableHeader:m,tableContent:y,tableSettingsHeader:C,hasSelection:c,selectedCount:s,selectedRows:o,selectedRowsName:t,deleteSelectedPopupRef:p,tableSettingsRef:_,statusOptionsList:h,showCalculatedSummary:d,summaryItems:f,...M,...j,onSelectionChanged:A,deselectAll:w,deleteSelected:P,changeTableSettings:l,calculateSummaryItems:v,openDeletePopup:k}}export{U as u};
